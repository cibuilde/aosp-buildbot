name: AOSP Build
on: push
env:
  BRANCH: android-12.0.0_r1
jobs:
  clone_bootstrap:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@main
    - name: Restore Cache build/make
      id: build_make
      uses: actions/cache@v3
      with:
        path: "aosp/build/make"
        key: "build_make@$BRANCH"
        restore-keys: "build_make@$BRANCH"
    - name: Clone project build/make
      if: steps.build_make.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform build
        mv build make && mkdir build && mv make build/
        sed -i 's/^PRODUCT_EXTRA_VNDK_VERSIONS/#PRODUCT_EXTRA_VNDK_VERSIONS/g' build/make/target/product/gsi_release.mk
    - name: Restore Cache build/blueprint
      id: build_blueprint
      uses: actions/cache@v3
      with:
        path: "aosp/build/blueprint"
        key: "build_blueprint@$BRANCH"
        restore-keys: "build_blueprint@$BRANCH"
    - name: Clone project build/blueprint
      if: steps.build_blueprint.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform build/blueprint
    - name: Restore Cache build/soong
      id: build_soong
      uses: actions/cache@v3
      with:
        path: "aosp/build/soong"
        key: "build_soong@$BRANCH"
        restore-keys: "build_soong@$BRANCH"
    - name: Clone project build/soong
      if: steps.build_soong.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform build/soong
    - name: Restore Cache bionic
      id: bionic
      uses: actions/cache@v3
      with:
        path: "aosp/bionic"
        key: "bionic@$BRANCH"
        restore-keys: "bionic@$BRANCH"
    - name: Clone project bionic
      if: steps.bionic.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform bionic
    - name: Restore Cache external/golang-protobuf
      id: external_golang-protobuf
      uses: actions/cache@v3
      with:
        path: "aosp/external/golang-protobuf"
        key: "external_golang-protobuf@$BRANCH"
        restore-keys: "external_golang-protobuf@$BRANCH"
    - name: Clone project external/golang-protobuf
      if: steps.external_golang-protobuf.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/golang-protobuf
    - name: Restore Cache external/starlark-go
      id: external_starlark-go
      uses: actions/cache@v3
      with:
        path: "aosp/external/starlark-go"
        key: "external_starlark-go@$BRANCH"
        restore-keys: "external_starlark-go@$BRANCH"
    - name: Clone project external/starlark-go
      if: steps.external_starlark-go.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/starlark-go
    - name: Restore Cache system/core
      id: system_core
      uses: actions/cache@v3
      with:
        path: "aosp/system/core"
        key: "system_core@$BRANCH"
        restore-keys: "system_core@$BRANCH"
    - name: Clone project system/core
      if: steps.system_core.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform system/core
    - name: Restore Cache system/libbase
      id: system_libbase
      uses: actions/cache@v3
      with:
        path: "aosp/system/libbase"
        key: "system_libbase@$BRANCH"
        restore-keys: "system_libbase@$BRANCH"
    - name: Clone project system/libbase
      if: steps.system_libbase.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform system/libbase
    - name: Restore Cache system/libhwbinder
      id: system_libhwbinder
      uses: actions/cache@v3
      with:
        path: "aosp/system/libhwbinder"
        key: "system_libhwbinder@$BRANCH"
        restore-keys: "system_libhwbinder@$BRANCH"
    - name: Clone project system/libhwbinder
      if: steps.system_libhwbinder.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform system/libhwbinder
    - name: Restore Cache system/logging
      id: system_logging
      uses: actions/cache@v3
      with:
        path: "aosp/system/logging"
        key: "system_logging@$BRANCH"
        restore-keys: "system_logging@$BRANCH"
    - name: Clone project system/logging
      if: steps.system_logging.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform system/logging
    - name: Restore Cache system/sepolicy
      id: system_sepolicy
      uses: actions/cache@v3
      with:
        path: "aosp/system/sepolicy"
        key: "system_sepolicy@$BRANCH"
        restore-keys: "system_sepolicy@$BRANCH"
    - name: Clone project system/sepolicy
      if: steps.system_sepolicy.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform system/sepolicy
    - name: Restore Cache kernel/configs
      id: kernel_configs
      uses: actions/cache@v3
      with:
        path: "aosp/kernel/configs"
        key: "kernel_configs@$BRANCH"
        restore-keys: "kernel_configs@$BRANCH"
    - name: Clone project kernel/configs
      if: steps.kernel_configs.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth kernel/configs
  clone_prebuilts:
    needs: [clone_bootstrap]
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@main
    - name: Restore Cache build/soong
      id: build_soong
      uses: actions/cache@v3
      with:
        path: "aosp/build/soong"
        key: "build_soong@$BRANCH"
        restore-keys: "build_soong@$BRANCH"
    - name: Download get_clang_version.py and Link go
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        curl "https://android.googlesource.com/platform/build/soong/+/refs/heads/master/scripts/get_clang_version.py?format=TEXT" | base64 -d > $ROOTDIR/get_clang_version.py
        popd
    - name: Restore Cache prebuilts/build-tools
      id: prebuilts_build-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/build-tools"
        key: "prebuilts_build-tools@$BRANCH"
        restore-keys: "prebuilts_build-tools@$BRANCH"
    - name: Clone project prebuilts/build-tools
      if: steps.prebuilts_build-tools.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_sparse prebuilts/build-tools linux-x86/bin linux-x86/lib64 path common
    - name: Restore Cache prebuilts/clang-tools
      id: prebuilts_clang-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang-tools"
        key: "prebuilts_clang-tools@$BRANCH"
        restore-keys: "prebuilts_clang-tools@$BRANCH"
    - name: Clone project prebuilts/clang-tools
      if: steps.prebuilts_clang-tools.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_sparse prebuilts/clang-tools linux-x86/bin linux-x86/lib64/clang
    - name: Restore Cache prebuilts/clang/host/linux-x86
      id: prebuilts_clang_host_linux-x86
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang/host/linux-x86"
        key: "prebuilts_clang_host_linux-x86@$BRANCH"
        restore-keys: "prebuilts_clang_host_linux-x86@$BRANCH"
    - name: Clone project prebuilts/clang/host/linux-x86
      if: steps.prebuilts_clang_host_linux-x86.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_sparse prebuilts/clang/host/linux-x86 $(python ${ROOTDIR}/get_clang_version.py) soong
    - name: Restore Cache prebuilts/ndk
      id: prebuilts_ndk
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/ndk"
        key: "prebuilts_ndk@$BRANCH"
        restore-keys: "prebuilts_ndk@$BRANCH"
    - name: Clone project prebuilts/ndk
      if: steps.prebuilts_ndk.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_sparse prebuilts/ndk current
  build_step_0:
    runs-on: ubuntu-latest
    needs: [clone_bootstrap,clone_prebuilts]
    steps:
    - name: Checkout
      uses: actions/checkout@main

    - name: Restore Cache build/make
      id: build_make
      uses: actions/cache@v3
      with:
        path: "aosp/build/make"
        key: "build_make@$BRANCH"
        restore-keys: "build_make@$BRANCH"
    - name: Restore Cache build/blueprint
      id: build_blueprint
      uses: actions/cache@v3
      with:
        path: "aosp/build/blueprint"
        key: "build_blueprint@$BRANCH"
        restore-keys: "build_blueprint@$BRANCH"
    - name: Restore Cache build/soong
      id: build_soong
      uses: actions/cache@v3
      with:
        path: "aosp/build/soong"
        key: "build_soong@$BRANCH"
        restore-keys: "build_soong@$BRANCH"
    - name: Restore Cache bionic
      id: bionic
      uses: actions/cache@v3
      with:
        path: "aosp/bionic"
        key: "bionic@$BRANCH"
        restore-keys: "bionic@$BRANCH"
    - name: Restore Cache external/golang-protobuf
      id: external_golang-protobuf
      uses: actions/cache@v3
      with:
        path: "aosp/external/golang-protobuf"
        key: "external_golang-protobuf@$BRANCH"
        restore-keys: "external_golang-protobuf@$BRANCH"
    - name: Restore Cache external/starlark-go
      id: external_starlark-go
      uses: actions/cache@v3
      with:
        path: "aosp/external/starlark-go"
        key: "external_starlark-go@$BRANCH"
        restore-keys: "external_starlark-go@$BRANCH"
    - name: Restore Cache system/core
      id: system_core
      uses: actions/cache@v3
      with:
        path: "aosp/system/core"
        key: "system_core@$BRANCH"
        restore-keys: "system_core@$BRANCH"
    - name: Restore Cache system/libbase
      id: system_libbase
      uses: actions/cache@v3
      with:
        path: "aosp/system/libbase"
        key: "system_libbase@$BRANCH"
        restore-keys: "system_libbase@$BRANCH"
    - name: Restore Cache system/libhwbinder
      id: system_libhwbinder
      uses: actions/cache@v3
      with:
        path: "aosp/system/libhwbinder"
        key: "system_libhwbinder@$BRANCH"
        restore-keys: "system_libhwbinder@$BRANCH"
    - name: Restore Cache system/logging
      id: system_logging
      uses: actions/cache@v3
      with:
        path: "aosp/system/logging"
        key: "system_logging@$BRANCH"
        restore-keys: "system_logging@$BRANCH"
    - name: Restore Cache system/sepolicy
      id: system_sepolicy
      uses: actions/cache@v3
      with:
        path: "aosp/system/sepolicy"
        key: "system_sepolicy@$BRANCH"
        restore-keys: "system_sepolicy@$BRANCH"
    - name: Restore Cache kernel/configs
      id: kernel_configs
      uses: actions/cache@v3
      with:
        path: "aosp/kernel/configs"
        key: "kernel_configs@$BRANCH"
        restore-keys: "kernel_configs@$BRANCH"
    - name: Restore Cache prebuilts/build-tools
      id: prebuilts_build-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/build-tools"
        key: "prebuilts_build-tools@$BRANCH"
        restore-keys: "prebuilts_build-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang-tools
      id: prebuilts_clang-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang-tools"
        key: "prebuilts_clang-tools@$BRANCH"
        restore-keys: "prebuilts_clang-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang/host/linux-x86
      id: prebuilts_clang_host_linux-x86
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang/host/linux-x86"
        key: "prebuilts_clang_host_linux-x86@$BRANCH"
        restore-keys: "prebuilts_clang_host_linux-x86@$BRANCH"
    - name: Restore Cache prebuilts/ndk
      id: prebuilts_ndk
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/ndk"
        key: "prebuilts_ndk@$BRANCH"
        restore-keys: "prebuilts_ndk@$BRANCH"
    - name: Copy and Link
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        cp build/make/core/root.mk Makefile
        ln -sf make/CleanSpec.mk build/ && ln -sf make/core build/
        ln -sf make/target build/ && ln -sf make/tools build/
        ln -sf build/soong/root.bp Android.bp
        mkdir -p prebuilts/go && touch prebuilts/go/.out-dir
        ln -sf $GOROOT_1_19_X64 prebuilts/go/linux-x86
        popd
    - name: Restore Cache external/gwp_asan
      id: external_gwp_asan
      uses: actions/cache@v3
      with:
        path: "aosp/external/gwp_asan"
        key: "external_gwp_asan@$BRANCH"
        restore-keys: "external_gwp_asan@$BRANCH"
    - name: Clone project external/gwp_asan
      if: steps.external_gwp_asan.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/gwp_asan
    - name: Restore Cache external/scudo
      id: external_scudo
      uses: actions/cache@v3
      with:
        path: "aosp/external/scudo"
        key: "external_scudo@$BRANCH"
        restore-keys: "external_scudo@$BRANCH"
    - name: Clone project external/scudo
      if: steps.external_scudo.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/scudo
    - name: Restore Cache external/arm-optimized-routines
      id: external_arm-optimized-routines
      uses: actions/cache@v3
      with:
        path: "aosp/external/arm-optimized-routines"
        key: "external_arm-optimized-routines@$BRANCH"
        restore-keys: "external_arm-optimized-routines@$BRANCH"
    - name: Clone project external/arm-optimized-routines
      if: steps.external_arm-optimized-routines.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/arm-optimized-routines
    - name: Start Soong
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        mkdir -p out/soong/.minibootstrap out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/soong_build out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/bpglob out/soong/.minibootstrap
        cp $ROOTDIR/ckati prebuilts/build-tools/linux-x86/bin
        GOROOT=$TOP/prebuilts/go/linux-x86 $ROOTDIR/soong_ui --make-mode --skip-soong-tests --skip-write-modules -j1 TARGET_PRODUCT=aosp_x86_64 TARGET_BUILD_VARIANT=eng ALLOW_MISSING_DEPENDENCIES=true BUILD_BROKEN_DISABLE_BAZEL=1 nothing
        popd
    - name: build target external_gwp_asan-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/external/gwp_asan/gwp_asan/android_recovery_x86_64_static/gwp_asan.a out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_64_static/gwp_asan.a out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_64_static_apex10000/gwp_asan.a out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_x86_64_static/gwp_asan.a out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_x86_64_static_apex10000/gwp_asan.a)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target external_gwp_asan-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/external/gwp_asan/gwp_asan/android_recovery_x86_64_static/gwp_asan.a ] && mkdir -p prebuiltlibs/external/gwp_asan/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/gwp_asan/gwp_asan/android_recovery_x86_64_static/gwp_asan.a prebuiltlibs/external/gwp_asan/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_64_static/gwp_asan.a ] && mkdir -p prebuiltlibs/external/gwp_asan/android_x86_64_static/ && cp out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_64_static/gwp_asan.a prebuiltlibs/external/gwp_asan/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_64_static_apex10000/gwp_asan.a ] && mkdir -p prebuiltlibs/external/gwp_asan/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_64_static_apex10000/gwp_asan.a prebuiltlibs/external/gwp_asan/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_x86_64_static/gwp_asan.a ] && mkdir -p prebuiltlibs/external/gwp_asan/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_x86_64_static/gwp_asan.a prebuiltlibs/external/gwp_asan/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_x86_64_static_apex10000/gwp_asan.a ] && mkdir -p prebuiltlibs/external/gwp_asan/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/gwp_asan/gwp_asan/android_x86_x86_64_static_apex10000/gwp_asan.a prebuiltlibs/external/gwp_asan/android_x86_x86_64_static_apex10000/ || true
        cp -r out/soong/ninja/external/gwp_asan prebuiltlibs/external/gwp_asan/external_gwp_asan-0
        grep '|external/gwp_asan' out/soong/module-info.txt >> prebuiltlibs/external/gwp_asan/MODULES
        du -ad1 external/gwp_asan | sort -rnk1 > prebuiltlibs/external/gwp_asan/.SIZE
        popd
    - name: write Android.bp external_gwp_asan-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library_static {\n\tname: \"gwp_asan\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/gwp_asan.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/gwp_asan.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/gwp_asan.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/gwp_asan.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/gwp_asan.a\",\n\tsrcs: [\"android_recovery_x86_64_static/gwp_asan.a\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"S\", system_shared_libs: [\"\",], stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",\"com.android.media.swcodec\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/external/gwp_asan/Android.bp
        printf "\n" >> prebuiltlibs/external/gwp_asan/Android.bp
        popd
    - name: Archive external_gwp_asan-0
      uses: actions/upload-artifact@v3
      with:
        name: external_gwp_asan-0
        path: aosp/prebuiltlibs/external/gwp_asan
    - name: build target external_scudo-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/external/scudo/libscudo/android_recovery_x86_64_static/libscudo.a out/soong/.intermediates/external/scudo/libscudo/android_x86_64_static/libscudo.a out/soong/.intermediates/external/scudo/libscudo/android_x86_64_static_apex10000/libscudo.a out/soong/.intermediates/external/scudo/libscudo/android_x86_x86_64_static/libscudo.a out/soong/.intermediates/external/scudo/libscudo/android_x86_x86_64_static_apex10000/libscudo.a)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target external_scudo-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/external/scudo/libscudo/android_recovery_x86_64_static/libscudo.a ] && mkdir -p prebuiltlibs/external/scudo/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/scudo/libscudo/android_recovery_x86_64_static/libscudo.a prebuiltlibs/external/scudo/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/scudo/libscudo/android_x86_64_static/libscudo.a ] && mkdir -p prebuiltlibs/external/scudo/android_x86_64_static/ && cp out/soong/.intermediates/external/scudo/libscudo/android_x86_64_static/libscudo.a prebuiltlibs/external/scudo/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/scudo/libscudo/android_x86_64_static_apex10000/libscudo.a ] && mkdir -p prebuiltlibs/external/scudo/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/scudo/libscudo/android_x86_64_static_apex10000/libscudo.a prebuiltlibs/external/scudo/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/scudo/libscudo/android_x86_x86_64_static/libscudo.a ] && mkdir -p prebuiltlibs/external/scudo/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/scudo/libscudo/android_x86_x86_64_static/libscudo.a prebuiltlibs/external/scudo/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/scudo/libscudo/android_x86_x86_64_static_apex10000/libscudo.a ] && mkdir -p prebuiltlibs/external/scudo/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/scudo/libscudo/android_x86_x86_64_static_apex10000/libscudo.a prebuiltlibs/external/scudo/android_x86_x86_64_static_apex10000/ || true
        cp -r out/soong/ninja/external/scudo prebuiltlibs/external/scudo/external_scudo-0
        grep '|external/scudo' out/soong/module-info.txt >> prebuiltlibs/external/scudo/MODULES
        du -ad1 external/scudo | sort -rnk1 > prebuiltlibs/external/scudo/.SIZE
        popd
    - name: write Android.bp external_scudo-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library_static {\n\tname: \"libscudo\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libscudo.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libscudo.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libscudo.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libscudo.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libscudo.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libscudo.a\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"\",], stl: \"none\", \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/external/scudo/Android.bp
        printf "\n" >> prebuiltlibs/external/scudo/Android.bp
        popd
    - name: Archive external_scudo-0
      uses: actions/upload-artifact@v3
      with:
        name: external_scudo-0
        path: aosp/prebuiltlibs/external/scudo
    - name: build target external_arm-optimized-routines-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_recovery_x86_64_static/libarm-optimized-routines-string.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_64_static/libarm-optimized-routines-string.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_64_static_apex10000/libarm-optimized-routines-string.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_x86_64_static/libarm-optimized-routines-string.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_x86_64_static_apex10000/libarm-optimized-routines-string.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_recovery_x86_64_static/libarm-optimized-routines-math.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_64_static/libarm-optimized-routines-math.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_64_static_apex10000/libarm-optimized-routines-math.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_x86_64_static/libarm-optimized-routines-math.a out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_x86_64_static_apex10000/libarm-optimized-routines-math.a)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target external_arm-optimized-routines-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_recovery_x86_64_static/libarm-optimized-routines-string.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_recovery_x86_64_static/libarm-optimized-routines-string.a prebuiltlibs/external/arm-optimized-routines/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_64_static/libarm-optimized-routines-string.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_64_static/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_64_static/libarm-optimized-routines-string.a prebuiltlibs/external/arm-optimized-routines/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_64_static_apex10000/libarm-optimized-routines-string.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_64_static_apex10000/libarm-optimized-routines-string.a prebuiltlibs/external/arm-optimized-routines/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_x86_64_static/libarm-optimized-routines-string.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_x86_64_static/libarm-optimized-routines-string.a prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_x86_64_static_apex10000/libarm-optimized-routines-string.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-string/android_x86_x86_64_static_apex10000/libarm-optimized-routines-string.a prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_recovery_x86_64_static/libarm-optimized-routines-math.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_recovery_x86_64_static/libarm-optimized-routines-math.a prebuiltlibs/external/arm-optimized-routines/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_64_static/libarm-optimized-routines-math.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_64_static/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_64_static/libarm-optimized-routines-math.a prebuiltlibs/external/arm-optimized-routines/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_64_static_apex10000/libarm-optimized-routines-math.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_64_static_apex10000/libarm-optimized-routines-math.a prebuiltlibs/external/arm-optimized-routines/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_x86_64_static/libarm-optimized-routines-math.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_x86_64_static/libarm-optimized-routines-math.a prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_x86_64_static_apex10000/libarm-optimized-routines-math.a ] && mkdir -p prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/arm-optimized-routines/libarm-optimized-routines-math/android_x86_x86_64_static_apex10000/libarm-optimized-routines-math.a prebuiltlibs/external/arm-optimized-routines/android_x86_x86_64_static_apex10000/ || true
        cp -r out/soong/ninja/external/arm-optimized-routines prebuiltlibs/external/arm-optimized-routines/external_arm-optimized-routines-0
        grep '|external/arm-optimized-routines' out/soong/module-info.txt >> prebuiltlibs/external/arm-optimized-routines/MODULES
        du -ad1 external/arm-optimized-routines | sort -rnk1 > prebuiltlibs/external/arm-optimized-routines/.SIZE
        popd
    - name: write Android.bp external_arm-optimized-routines-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library_static {\n\tname: \"libarm-optimized-routines-string\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libarm-optimized-routines-string.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libarm-optimized-routines-string.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libarm-optimized-routines-string.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libarm-optimized-routines-string.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libarm-optimized-routines-string.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libarm-optimized-routines-string.a\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"\",], stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_static {\n\tname: \"libarm-optimized-routines-math\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libarm-optimized-routines-math.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libarm-optimized-routines-math.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libarm-optimized-routines-math.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libarm-optimized-routines-math.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libarm-optimized-routines-math.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libarm-optimized-routines-math.a\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"\",], stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/external/arm-optimized-routines/Android.bp
        printf "\n" >> prebuiltlibs/external/arm-optimized-routines/Android.bp
        popd
    - name: Archive external_arm-optimized-routines-0
      uses: actions/upload-artifact@v3
      with:
        name: external_arm-optimized-routines-0
        path: aosp/prebuiltlibs/external/arm-optimized-routines
  build_step_1:
    runs-on: ubuntu-latest
    needs: [build_step_0,clone_bootstrap,clone_prebuilts]
    steps:
    - name: Checkout
      uses: actions/checkout@main

    - name: Restore Cache build/make
      id: build_make
      uses: actions/cache@v3
      with:
        path: "aosp/build/make"
        key: "build_make@$BRANCH"
        restore-keys: "build_make@$BRANCH"
    - name: Restore Cache build/blueprint
      id: build_blueprint
      uses: actions/cache@v3
      with:
        path: "aosp/build/blueprint"
        key: "build_blueprint@$BRANCH"
        restore-keys: "build_blueprint@$BRANCH"
    - name: Restore Cache build/soong
      id: build_soong
      uses: actions/cache@v3
      with:
        path: "aosp/build/soong"
        key: "build_soong@$BRANCH"
        restore-keys: "build_soong@$BRANCH"
    - name: Restore Cache bionic
      id: bionic
      uses: actions/cache@v3
      with:
        path: "aosp/bionic"
        key: "bionic@$BRANCH"
        restore-keys: "bionic@$BRANCH"
    - name: Restore Cache external/golang-protobuf
      id: external_golang-protobuf
      uses: actions/cache@v3
      with:
        path: "aosp/external/golang-protobuf"
        key: "external_golang-protobuf@$BRANCH"
        restore-keys: "external_golang-protobuf@$BRANCH"
    - name: Restore Cache external/starlark-go
      id: external_starlark-go
      uses: actions/cache@v3
      with:
        path: "aosp/external/starlark-go"
        key: "external_starlark-go@$BRANCH"
        restore-keys: "external_starlark-go@$BRANCH"
    - name: Restore Cache system/core
      id: system_core
      uses: actions/cache@v3
      with:
        path: "aosp/system/core"
        key: "system_core@$BRANCH"
        restore-keys: "system_core@$BRANCH"
    - name: Restore Cache system/libbase
      id: system_libbase
      uses: actions/cache@v3
      with:
        path: "aosp/system/libbase"
        key: "system_libbase@$BRANCH"
        restore-keys: "system_libbase@$BRANCH"
    - name: Restore Cache system/libhwbinder
      id: system_libhwbinder
      uses: actions/cache@v3
      with:
        path: "aosp/system/libhwbinder"
        key: "system_libhwbinder@$BRANCH"
        restore-keys: "system_libhwbinder@$BRANCH"
    - name: Restore Cache system/logging
      id: system_logging
      uses: actions/cache@v3
      with:
        path: "aosp/system/logging"
        key: "system_logging@$BRANCH"
        restore-keys: "system_logging@$BRANCH"
    - name: Restore Cache system/sepolicy
      id: system_sepolicy
      uses: actions/cache@v3
      with:
        path: "aosp/system/sepolicy"
        key: "system_sepolicy@$BRANCH"
        restore-keys: "system_sepolicy@$BRANCH"
    - name: Restore Cache kernel/configs
      id: kernel_configs
      uses: actions/cache@v3
      with:
        path: "aosp/kernel/configs"
        key: "kernel_configs@$BRANCH"
        restore-keys: "kernel_configs@$BRANCH"
    - name: Restore Cache prebuilts/build-tools
      id: prebuilts_build-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/build-tools"
        key: "prebuilts_build-tools@$BRANCH"
        restore-keys: "prebuilts_build-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang-tools
      id: prebuilts_clang-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang-tools"
        key: "prebuilts_clang-tools@$BRANCH"
        restore-keys: "prebuilts_clang-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang/host/linux-x86
      id: prebuilts_clang_host_linux-x86
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang/host/linux-x86"
        key: "prebuilts_clang_host_linux-x86@$BRANCH"
        restore-keys: "prebuilts_clang_host_linux-x86@$BRANCH"
    - name: Restore Cache prebuilts/ndk
      id: prebuilts_ndk
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/ndk"
        key: "prebuilts_ndk@$BRANCH"
        restore-keys: "prebuilts_ndk@$BRANCH"
    - name: Copy and Link
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        cp build/make/core/root.mk Makefile
        ln -sf make/CleanSpec.mk build/ && ln -sf make/core build/
        ln -sf make/target build/ && ln -sf make/tools build/
        ln -sf build/soong/root.bp Android.bp
        mkdir -p prebuilts/go && touch prebuilts/go/.out-dir
        ln -sf $GOROOT_1_19_X64 prebuilts/go/linux-x86
        popd
    - name: Restore Cache external/gwp_asan
      id: external_gwp_asan
      uses: actions/cache@v3
      with:
        path: "aosp/external/gwp_asan"
        key: "external_gwp_asan@$BRANCH"
        restore-keys: "external_gwp_asan@$BRANCH"
    - name: Clone project external/gwp_asan
      if: steps.external_gwp_asan.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/gwp_asan
    - name: Restore Cache external/scudo
      id: external_scudo
      uses: actions/cache@v3
      with:
        path: "aosp/external/scudo"
        key: "external_scudo@$BRANCH"
        restore-keys: "external_scudo@$BRANCH"
    - name: Clone project external/scudo
      if: steps.external_scudo.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/scudo
    - name: Restore Cache external/arm-optimized-routines
      id: external_arm-optimized-routines
      uses: actions/cache@v3
      with:
        path: "aosp/external/arm-optimized-routines"
        key: "external_arm-optimized-routines@$BRANCH"
        restore-keys: "external_arm-optimized-routines@$BRANCH"
    - name: Clone project external/arm-optimized-routines
      if: steps.external_arm-optimized-routines.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/arm-optimized-routines
    - name: Download artifact external_gwp_asan-0
      uses: actions/download-artifact@v3
      with:
        name: external_gwp_asan-0
        path: aosp/prebuiltlibs/external/gwp_asan
    - name: Download artifact external_scudo-0
      uses: actions/download-artifact@v3
      with:
        name: external_scudo-0
        path: aosp/prebuiltlibs/external/scudo
    - name: Download artifact external_arm-optimized-routines-0
      uses: actions/download-artifact@v3
      with:
        name: external_arm-optimized-routines-0
        path: aosp/prebuiltlibs/external/arm-optimized-routines
    - name: Start Soong
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        mkdir -p out/soong/.minibootstrap out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/soong_build out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/bpglob out/soong/.minibootstrap
        cp $ROOTDIR/ckati prebuilts/build-tools/linux-x86/bin
        GOROOT=$TOP/prebuilts/go/linux-x86 $ROOTDIR/soong_ui --make-mode --skip-soong-tests --skip-write-modules -j1 TARGET_PRODUCT=aosp_x86_64 TARGET_BUILD_VARIANT=eng ALLOW_MISSING_DEPENDENCIES=true BUILD_BROKEN_DISABLE_BAZEL=1 nothing
        popd
    - name: build target bionic-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/bionic/libc/libc/android_recovery_x86_64_shared/libc.so out/soong/.intermediates/bionic/libc/libc/android_vendor.31_x86_64_shared/libc.so out/soong/.intermediates/bionic/libc/libc/android_vendor.31_x86_x86_64_shared/libc.so out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared/libc.so out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared_apex10000/libc.so out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared_current/libc.so out/soong/.intermediates/bionic/libc/libc/android_x86_64_static/libc.a out/soong/.intermediates/bionic/libc/libc/android_x86_64_static_apex10000/libc.a out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared/libc.so out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared_apex10000/libc.so out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared_current/libc.so out/soong/.intermediates/bionic/libc/libstdc++/android_x86_64_shared/libstdc++.so out/soong/.intermediates/bionic/libc/libstdc++/android_x86_x86_64_shared/libstdc++.so out/soong/.intermediates/bionic/libc/crtbegin_so/android_recovery_x86_64/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_vendor.31_x86_64/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_vendor.31_x86_x86_64/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex10000/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex29/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex30/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex31/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_29/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_29_apex30/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_30/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_30_apex30/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_current/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex10000/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex29/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex30/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex31/crtbegin_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_recovery_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_vendor.31_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_vendor.31_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_29/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_29_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_30/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_30_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_current/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend_so.o out/soong/.intermediates/bionic/libc/crtbegin_static/android_x86_64/crtbegin_static.o out/soong/.intermediates/bionic/libc/crtbegin_static/android_x86_64_apex10000/crtbegin_static.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_recovery_x86_64/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_vendor.31_x86_64/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_vendor.31_x86_x86_64/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex10000/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex29/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex30/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex31/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex10000/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex29/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex31/crtbegin_dynamic.o out/soong/.intermediates/bionic/libc/crtend_android/android_recovery_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_vendor.31_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_vendor.31_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend.o out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_21/libc.so out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_29/libc.so out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_30/libc.so out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_current/libc.so out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_21/libstdc++.so out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_29/libstdc++.so out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_current/libstdc++.so out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_recovery_x86_64_static/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_vendor.31_x86_64_static/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_vendor.31_x86_x86_64_static/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_apex10000/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_apex31/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_lto-thin/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_apex10000/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_apex31/libasync_safe.a out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_lto-thin/libasync_safe.a out/soong/.intermediates/bionic/libdl/libdl_android/android_x86_64_shared/libdl_android.so out/soong/.intermediates/bionic/libdl/libdl_android/android_x86_x86_64_shared/libdl_android.so out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_21/libdl.so out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_29/libdl.so out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_30/libdl.so out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_current/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_recovery_x86_64_shared/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_vendor.31_x86_64_shared/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_vendor.31_x86_x86_64_shared/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared_apex10000/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared_current/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_static/libdl.a out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared_apex10000/libdl.so out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared_current/libdl.so out/soong/.intermediates/bionic/libm/libm/android_recovery_x86_64_shared/libm.so out/soong/.intermediates/bionic/libm/libm/android_vendor.31_x86_64_shared/libm.so out/soong/.intermediates/bionic/libm/libm/android_vendor.31_x86_x86_64_shared/libm.so out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared/libm.so out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared_apex10000/libm.so out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared_current/libm.so out/soong/.intermediates/bionic/libm/libm/android_x86_64_static/libm.a out/soong/.intermediates/bionic/libm/libm/android_x86_64_static_apex10000/libm.a out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared/libm.so out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared_apex10000/libm.so out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared_current/libm.so out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_21/libm.so out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_29/libm.so out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_30/libm.so out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_current/libm.so)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target bionic-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/bionic/libc/libc/android_recovery_x86_64_shared/libc.so ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libc/android_recovery_x86_64_shared/libc.so prebuiltlibs/bionic/android_recovery_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_vendor.31_x86_64_shared/libc.so ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libc/android_vendor.31_x86_64_shared/libc.so prebuiltlibs/bionic/android_vendor.31_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_vendor.31_x86_x86_64_shared/libc.so ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libc/android_vendor.31_x86_x86_64_shared/libc.so prebuiltlibs/bionic/android_vendor.31_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared/libc.so prebuiltlibs/bionic/android_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared_apex10000/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared_apex10000/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared_apex10000/libc.so prebuiltlibs/bionic/android_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared_current/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared_current/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_64_shared_current/libc.so prebuiltlibs/bionic/android_x86_64_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_64_static/libc.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_64_static/libc.a prebuiltlibs/bionic/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_64_static_apex10000/libc.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_64_static_apex10000/libc.a prebuiltlibs/bionic/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared/libc.so prebuiltlibs/bionic/android_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared_apex10000/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared_apex10000/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared_apex10000/libc.so prebuiltlibs/bionic/android_x86_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared_current/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared_current/ && cp out/soong/.intermediates/bionic/libc/libc/android_x86_x86_64_shared_current/libc.so prebuiltlibs/bionic/android_x86_x86_64_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libc/libstdc++/android_x86_64_shared/libstdc++.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libstdc++/android_x86_64_shared/libstdc++.so prebuiltlibs/bionic/android_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/libstdc++/android_x86_x86_64_shared/libstdc++.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libc/libstdc++/android_x86_x86_64_shared/libstdc++.so prebuiltlibs/bionic/android_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_recovery_x86_64/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_recovery_x86_64/crtbegin_so.o prebuiltlibs/bionic/android_recovery_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_vendor.31_x86_64/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_vendor.31_x86_64/crtbegin_so.o prebuiltlibs/bionic/android_vendor.31_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_vendor.31_x86_x86_64/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_vendor.31_x86_x86_64/crtbegin_so.o prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64/crtbegin_so.o prebuiltlibs/bionic/android_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex10000/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex10000/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex29/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex29/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex30/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex30/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex30/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex31/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_apex31/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_29/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_29/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_29/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_sdk_29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_29_apex30/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_29_apex30/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_29_apex30/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_sdk_29_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_30/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_30/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_30/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_sdk_30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_30_apex30/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_30_apex30/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_30_apex30/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_sdk_30_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_current/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_current/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_64_sdk_current/crtbegin_so.o prebuiltlibs/bionic/android_x86_64_sdk_current/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64/crtbegin_so.o prebuiltlibs/bionic/android_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex10000/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex10000/crtbegin_so.o prebuiltlibs/bionic/android_x86_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex29/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex29/crtbegin_so.o prebuiltlibs/bionic/android_x86_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex30/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex30/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex30/crtbegin_so.o prebuiltlibs/bionic/android_x86_x86_64_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex31/crtbegin_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtbegin_so/android_x86_x86_64_apex31/crtbegin_so.o prebuiltlibs/bionic/android_x86_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_recovery_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_recovery_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_recovery_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_vendor.31_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_vendor.31_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_vendor.31_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_vendor.31_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_vendor.31_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex30/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_29/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_29/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_29/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_sdk_29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_29_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_29_apex30/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_29_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_sdk_29_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_30/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_30/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_30/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_sdk_30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_30_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_30_apex30/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_30_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_sdk_30_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_current/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_current/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_64_sdk_current/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_64_sdk_current/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex30/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_x86_64_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend_so.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtend_so/android_x86_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend_so.o prebuiltlibs/bionic/android_x86_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_static/android_x86_64/crtbegin_static.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_static/android_x86_64/crtbegin_static.o prebuiltlibs/bionic/android_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_static/android_x86_64_apex10000/crtbegin_static.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtbegin_static/android_x86_64_apex10000/crtbegin_static.o prebuiltlibs/bionic/android_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_recovery_x86_64/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_recovery_x86_64/crtbegin_dynamic.o prebuiltlibs/bionic/android_recovery_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_vendor.31_x86_64/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_vendor.31_x86_64/crtbegin_dynamic.o prebuiltlibs/bionic/android_vendor.31_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_vendor.31_x86_x86_64/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_vendor.31_x86_x86_64/crtbegin_dynamic.o prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex10000/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex10000/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex29/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex29/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex30/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex30/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex30/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_64_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex31/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_64_apex31/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex10000/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex10000/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex29/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex29/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex31/crtbegin_dynamic.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtbegin_dynamic/android_x86_x86_64_apex31/crtbegin_dynamic.o prebuiltlibs/bionic/android_x86_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_recovery_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_recovery_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_recovery_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_vendor.31_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_vendor.31_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_vendor.31_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_vendor.31_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_vendor.31_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_vendor.31_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex30/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex30/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_64_apex30/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_x86_64/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex10000/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex10000/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_x86_64_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex29/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex29/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_x86_64_apex29/ || true
        [ -e out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend.o ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_apex31/ && cp out/soong/.intermediates/bionic/libc/crtend_android/android_x86_x86_64_apex31/obj/bionic/libc/arch-common/bionic/crtend.o prebuiltlibs/bionic/android_x86_x86_64_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_21/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ && cp out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_21/libc.so prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_29/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ && cp out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_29/libc.so prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_30/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_30/ && cp out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_30/libc.so prebuiltlibs/bionic/android_x86_64_sdk_shared_30/ || true
        [ -e out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_current/libc.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ && cp out/soong/.intermediates/bionic/libc/libc.ndk/android_x86_64_sdk_shared_current/libc.so prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_21/libstdc++.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ && cp out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_21/libstdc++.so prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ || true
        [ -e out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_29/libstdc++.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ && cp out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_29/libstdc++.so prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ || true
        [ -e out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_current/libstdc++.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ && cp out/soong/.intermediates/bionic/libc/libstdc++.ndk/android_x86_64_sdk_shared_current/libstdc++.so prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_recovery_x86_64_static/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64_static/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_recovery_x86_64_static/libasync_safe.a prebuiltlibs/bionic/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_vendor.31_x86_64_static/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64_static/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_vendor.31_x86_64_static/libasync_safe.a prebuiltlibs/bionic/android_vendor.31_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_vendor.31_x86_x86_64_static/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64_static/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_vendor.31_x86_x86_64_static/libasync_safe.a prebuiltlibs/bionic/android_vendor.31_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static/libasync_safe.a prebuiltlibs/bionic/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_apex10000/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_apex10000/libasync_safe.a prebuiltlibs/bionic/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_apex31/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static_apex31/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_apex31/libasync_safe.a prebuiltlibs/bionic/android_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_lto-thin/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static_lto-thin/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_64_static_lto-thin/libasync_safe.a prebuiltlibs/bionic/android_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_static/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static/libasync_safe.a prebuiltlibs/bionic/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_apex10000/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_apex10000/libasync_safe.a prebuiltlibs/bionic/android_x86_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_apex31/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_static_apex31/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_apex31/libasync_safe.a prebuiltlibs/bionic/android_x86_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_lto-thin/libasync_safe.a ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/bionic/libc/async_safe/libasync_safe/android_x86_x86_64_static_lto-thin/libasync_safe.a prebuiltlibs/bionic/android_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl_android/android_x86_64_shared/libdl_android.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl_android/android_x86_64_shared/libdl_android.so prebuiltlibs/bionic/android_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl_android/android_x86_x86_64_shared/libdl_android.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl_android/android_x86_x86_64_shared/libdl_android.so prebuiltlibs/bionic/android_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_21/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ && cp out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_21/libdl.so prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_29/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ && cp out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_29/libdl.so prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_30/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_30/ && cp out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_30/libdl.so prebuiltlibs/bionic/android_x86_64_sdk_shared_30/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_current/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ && cp out/soong/.intermediates/bionic/libdl/libdl.ndk/android_x86_64_sdk_shared_current/libdl.so prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_recovery_x86_64_shared/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_recovery_x86_64_shared/libdl.so prebuiltlibs/bionic/android_recovery_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_vendor.31_x86_64_shared/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_vendor.31_x86_64_shared/libdl.so prebuiltlibs/bionic/android_vendor.31_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_vendor.31_x86_x86_64_shared/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_vendor.31_x86_x86_64_shared/libdl.so prebuiltlibs/bionic/android_vendor.31_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared/libdl.so prebuiltlibs/bionic/android_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared_apex10000/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared_apex10000/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared_apex10000/libdl.so prebuiltlibs/bionic/android_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared_current/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared_current/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_shared_current/libdl.so prebuiltlibs/bionic/android_x86_64_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_static/libdl.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_64_static/libdl.a prebuiltlibs/bionic/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared/libdl.so prebuiltlibs/bionic/android_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared_apex10000/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared_apex10000/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared_apex10000/libdl.so prebuiltlibs/bionic/android_x86_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared_current/libdl.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared_current/ && cp out/soong/.intermediates/bionic/libdl/libdl/android_x86_x86_64_shared_current/libdl.so prebuiltlibs/bionic/android_x86_x86_64_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_recovery_x86_64_shared/libm.so ] && mkdir -p prebuiltlibs/bionic/android_recovery_x86_64_shared/ && cp out/soong/.intermediates/bionic/libm/libm/android_recovery_x86_64_shared/libm.so prebuiltlibs/bionic/android_recovery_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_vendor.31_x86_64_shared/libm.so ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_64_shared/ && cp out/soong/.intermediates/bionic/libm/libm/android_vendor.31_x86_64_shared/libm.so prebuiltlibs/bionic/android_vendor.31_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_vendor.31_x86_x86_64_shared/libm.so ] && mkdir -p prebuiltlibs/bionic/android_vendor.31_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libm/libm/android_vendor.31_x86_x86_64_shared/libm.so prebuiltlibs/bionic/android_vendor.31_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared/libm.so prebuiltlibs/bionic/android_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared_apex10000/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared_apex10000/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared_apex10000/libm.so prebuiltlibs/bionic/android_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared_current/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_shared_current/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_64_shared_current/libm.so prebuiltlibs/bionic/android_x86_64_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_64_static/libm.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_64_static/libm.a prebuiltlibs/bionic/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_64_static_apex10000/libm.a ] && mkdir -p prebuiltlibs/bionic/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_64_static_apex10000/libm.a prebuiltlibs/bionic/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared/libm.so prebuiltlibs/bionic/android_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared_apex10000/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared_apex10000/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared_apex10000/libm.so prebuiltlibs/bionic/android_x86_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared_current/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_x86_64_shared_current/ && cp out/soong/.intermediates/bionic/libm/libm/android_x86_x86_64_shared_current/libm.so prebuiltlibs/bionic/android_x86_x86_64_shared_current/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_21/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ && cp out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_21/libm.so prebuiltlibs/bionic/android_x86_64_sdk_shared_21/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_29/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ && cp out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_29/libm.so prebuiltlibs/bionic/android_x86_64_sdk_shared_29/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_30/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_30/ && cp out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_30/libm.so prebuiltlibs/bionic/android_x86_64_sdk_shared_30/ || true
        [ -e out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_current/libm.so ] && mkdir -p prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ && cp out/soong/.intermediates/bionic/libm/libm.ndk/android_x86_64_sdk_shared_current/libm.so prebuiltlibs/bionic/android_x86_64_sdk_shared_current/ || true
        cp -r out/soong/ninja/bionic prebuiltlibs/bionic/bionic-0
        grep '|bionic' out/soong/module-info.txt >> prebuiltlibs/bionic/MODULES
        du -ad1 bionic | sort -rnk1 > prebuiltlibs/bionic/.SIZE
        popd
    - name: write Android.bp bionic-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library {\n\tname: \"libc\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_shared: \"android_recovery_x86_64_shared/libc.so\",\n\tandroid_vendor_31_x86_64_shared: \"android_vendor.31_x86_64_shared/libc.so\",\n\tandroid_vendor_31_x86_x86_64_shared: \"android_vendor.31_x86_x86_64_shared/libc.so\",\n\tandroid_x86_64_shared: \"android_x86_64_shared/libc.so\",\n\tandroid_x86_64_shared_apex10000: \"android_x86_64_shared_apex10000/libc.so\",\n\tandroid_x86_64_shared_current: \"android_x86_64_shared_current/libc.so\",\n\tandroid_x86_64_static: \"android_x86_64_static/libc.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libc.a\",\n\tandroid_x86_x86_64_shared: \"android_x86_x86_64_shared/libc.so\",\n\tandroid_x86_x86_64_shared_apex10000: \"android_x86_x86_64_shared_apex10000/libc.so\",\n\tandroid_x86_x86_64_shared_current: \"android_x86_x86_64_shared_current/libc.so\",\n\tsrcs: [\"android_x86_64_shared/libc.so\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"\",], stubs: { versions: [\"29\",\"30\",\"current\",], }, stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library {\n\tname: \"libstdc++\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tandroid_x86_64_shared: \"android_x86_64_shared/libstdc++.so\",\n\tandroid_x86_x86_64_shared: \"android_x86_x86_64_shared/libstdc++.so\",\n\tsrcs: [\"android_x86_64_shared/libstdc++.so\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"libc\",], stl: \"none\", \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_object {\n\tname: \"crtbegin_so\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64: \"android_recovery_x86_64/crtbegin_so.o\",\n\tandroid_vendor_31_x86_64: \"android_vendor.31_x86_64/crtbegin_so.o\",\n\tandroid_vendor_31_x86_x86_64: \"android_vendor.31_x86_x86_64/crtbegin_so.o\",\n\tandroid_x86_64: \"android_x86_64/crtbegin_so.o\",\n\tandroid_x86_64_apex10000: \"android_x86_64_apex10000/crtbegin_so.o\",\n\tandroid_x86_64_apex29: \"android_x86_64_apex29/crtbegin_so.o\",\n\tandroid_x86_64_apex30: \"android_x86_64_apex30/crtbegin_so.o\",\n\tandroid_x86_64_apex31: \"android_x86_64_apex31/crtbegin_so.o\",\n\tandroid_x86_64_sdk_29: \"android_x86_64_sdk_29/crtbegin_so.o\",\n\tandroid_x86_64_sdk_29_apex30: \"android_x86_64_sdk_29_apex30/crtbegin_so.o\",\n\tandroid_x86_64_sdk_30: \"android_x86_64_sdk_30/crtbegin_so.o\",\n\tandroid_x86_64_sdk_30_apex30: \"android_x86_64_sdk_30_apex30/crtbegin_so.o\",\n\tandroid_x86_64_sdk_current: \"android_x86_64_sdk_current/crtbegin_so.o\",\n\tandroid_x86_x86_64: \"android_x86_x86_64/crtbegin_so.o\",\n\tandroid_x86_x86_64_apex10000: \"android_x86_x86_64_apex10000/crtbegin_so.o\",\n\tandroid_x86_x86_64_apex29: \"android_x86_x86_64_apex29/crtbegin_so.o\",\n\tandroid_x86_x86_64_apex30: \"android_x86_x86_64_apex30/crtbegin_so.o\",\n\tandroid_x86_x86_64_apex31: \"android_x86_x86_64_apex31/crtbegin_so.o\",\n\tsrcs: [\"android_recovery_x86_64/crtbegin_so.o\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"16\", stl: \"none\", apex_available: [\"//apex_available:platform\",\"//apex_available:anyapex\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_object {\n\tname: \"crtend_so\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64: \"android_recovery_x86_64/crtend_so.o\",\n\tandroid_vendor_31_x86_64: \"android_vendor.31_x86_64/crtend_so.o\",\n\tandroid_vendor_31_x86_x86_64: \"android_vendor.31_x86_x86_64/crtend_so.o\",\n\tandroid_x86_64: \"android_x86_64/crtend_so.o\",\n\tandroid_x86_64_apex10000: \"android_x86_64_apex10000/crtend_so.o\",\n\tandroid_x86_64_apex29: \"android_x86_64_apex29/crtend_so.o\",\n\tandroid_x86_64_apex30: \"android_x86_64_apex30/crtend_so.o\",\n\tandroid_x86_64_apex31: \"android_x86_64_apex31/crtend_so.o\",\n\tandroid_x86_64_sdk_29: \"android_x86_64_sdk_29/crtend_so.o\",\n\tandroid_x86_64_sdk_29_apex30: \"android_x86_64_sdk_29_apex30/crtend_so.o\",\n\tandroid_x86_64_sdk_30: \"android_x86_64_sdk_30/crtend_so.o\",\n\tandroid_x86_64_sdk_30_apex30: \"android_x86_64_sdk_30_apex30/crtend_so.o\",\n\tandroid_x86_64_sdk_current: \"android_x86_64_sdk_current/crtend_so.o\",\n\tandroid_x86_x86_64: \"android_x86_x86_64/crtend_so.o\",\n\tandroid_x86_x86_64_apex10000: \"android_x86_x86_64_apex10000/crtend_so.o\",\n\tandroid_x86_x86_64_apex29: \"android_x86_x86_64_apex29/crtend_so.o\",\n\tandroid_x86_x86_64_apex30: \"android_x86_x86_64_apex30/crtend_so.o\",\n\tandroid_x86_x86_64_apex31: \"android_x86_x86_64_apex31/crtend_so.o\",\n\tsrcs: [\"android_recovery_x86_64/crtend_so.o\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"16\", stl: \"none\", apex_available: [\"//apex_available:platform\",\"//apex_available:anyapex\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_object {\n\tname: \"crtbegin_static\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tandroid_x86_64: \"android_x86_64/crtbegin_static.o\",\n\tandroid_x86_64_apex10000: \"android_x86_64_apex10000/crtbegin_static.o\",\n\tsrcs: [\"android_x86_64/crtbegin_static.o\"],\n\ttarget: { android: { compile_multilib: \"64\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"current\", stl: \"none\", apex_available: [\"//apex_available:platform\",\"//apex_available:anyapex\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_object {\n\tname: \"crtbegin_dynamic\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64: \"android_recovery_x86_64/crtbegin_dynamic.o\",\n\tandroid_vendor_31_x86_64: \"android_vendor.31_x86_64/crtbegin_dynamic.o\",\n\tandroid_vendor_31_x86_x86_64: \"android_vendor.31_x86_x86_64/crtbegin_dynamic.o\",\n\tandroid_x86_64: \"android_x86_64/crtbegin_dynamic.o\",\n\tandroid_x86_64_apex10000: \"android_x86_64_apex10000/crtbegin_dynamic.o\",\n\tandroid_x86_64_apex29: \"android_x86_64_apex29/crtbegin_dynamic.o\",\n\tandroid_x86_64_apex30: \"android_x86_64_apex30/crtbegin_dynamic.o\",\n\tandroid_x86_64_apex31: \"android_x86_64_apex31/crtbegin_dynamic.o\",\n\tandroid_x86_x86_64: \"android_x86_x86_64/crtbegin_dynamic.o\",\n\tandroid_x86_x86_64_apex10000: \"android_x86_x86_64_apex10000/crtbegin_dynamic.o\",\n\tandroid_x86_x86_64_apex29: \"android_x86_x86_64_apex29/crtbegin_dynamic.o\",\n\tandroid_x86_x86_64_apex31: \"android_x86_x86_64_apex31/crtbegin_dynamic.o\",\n\tsrcs: [\"android_recovery_x86_64/crtbegin_dynamic.o\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"16\", stl: \"none\", apex_available: [\"//apex_available:platform\",\"//apex_available:anyapex\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_object {\n\tname: \"crtend_android\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64: \"android_recovery_x86_64/crtend_android.o\",\n\tandroid_vendor_31_x86_64: \"android_vendor.31_x86_64/crtend_android.o\",\n\tandroid_vendor_31_x86_x86_64: \"android_vendor.31_x86_x86_64/crtend_android.o\",\n\tandroid_x86_64: \"android_x86_64/crtend_android.o\",\n\tandroid_x86_64_apex10000: \"android_x86_64_apex10000/crtend_android.o\",\n\tandroid_x86_64_apex29: \"android_x86_64_apex29/crtend_android.o\",\n\tandroid_x86_64_apex30: \"android_x86_64_apex30/crtend_android.o\",\n\tandroid_x86_64_apex31: \"android_x86_64_apex31/crtend_android.o\",\n\tandroid_x86_x86_64: \"android_x86_x86_64/crtend_android.o\",\n\tandroid_x86_x86_64_apex10000: \"android_x86_x86_64_apex10000/crtend_android.o\",\n\tandroid_x86_x86_64_apex29: \"android_x86_x86_64_apex29/crtend_android.o\",\n\tandroid_x86_x86_64_apex31: \"android_x86_x86_64_apex31/crtend_android.o\",\n\tsrcs: [\"android_recovery_x86_64/crtend_android.o\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"16\", stl: \"none\", apex_available: [\"//apex_available:platform\",\"//apex_available:anyapex\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_shared {\n\tname: \"libc.ndk\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tsdk_version: \"current\",\n\tsdk_variant_only: true,\n\tandroid_x86_64_sdk_shared_21: \"android_x86_64_sdk_shared_21/libc.ndk.so\",\n\tandroid_x86_64_sdk_shared_29: \"android_x86_64_sdk_shared_29/libc.ndk.so\",\n\tandroid_x86_64_sdk_shared_30: \"android_x86_64_sdk_shared_30/libc.ndk.so\",\n\tandroid_x86_64_sdk_shared_current: \"android_x86_64_sdk_shared_current/libc.ndk.so\",\n\tsrcs: [\"android_x86_64_sdk_shared_21/libc.ndk.so\"],\n\ttarget: { android: { compile_multilib: \"64\",  }, },\n\trequired: [],\n\tstubs: { versions: [\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"REL\",\"current\",], }, \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_shared {\n\tname: \"libstdc++.ndk\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tsdk_version: \"current\",\n\tsdk_variant_only: true,\n\tandroid_x86_64_sdk_shared_21: \"android_x86_64_sdk_shared_21/libstdc++.ndk.so\",\n\tandroid_x86_64_sdk_shared_29: \"android_x86_64_sdk_shared_29/libstdc++.ndk.so\",\n\tandroid_x86_64_sdk_shared_current: \"android_x86_64_sdk_shared_current/libstdc++.ndk.so\",\n\tsrcs: [\"android_x86_64_sdk_shared_21/libstdc++.ndk.so\"],\n\ttarget: { android: { compile_multilib: \"64\",  }, },\n\trequired: [],\n\tstubs: { versions: [\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"REL\",\"current\",], }, \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_static {\n\tname: \"libasync_safe\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libasync_safe.a\",\n\tandroid_vendor_31_x86_64_static: \"android_vendor.31_x86_64_static/libasync_safe.a\",\n\tandroid_vendor_31_x86_x86_64_static: \"android_vendor.31_x86_x86_64_static/libasync_safe.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libasync_safe.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libasync_safe.a\",\n\tandroid_x86_64_static_apex31: \"android_x86_64_static_apex31/libasync_safe.a\",\n\tandroid_x86_64_static_lto_thin: \"android_x86_64_static_lto-thin/libasync_safe.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libasync_safe.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libasync_safe.a\",\n\tandroid_x86_x86_64_static_apex31: \"android_x86_x86_64_static_apex31/libasync_safe.a\",\n\tandroid_x86_x86_64_static_lto_thin: \"android_x86_x86_64_static_lto-thin/libasync_safe.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libasync_safe.a\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"apex_inherit\", system_shared_libs: [\"\",], stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",\"com.android.art\",\"com.android.art.debug\",\"com.android.media\",\"com.android.media.swcodec\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library {\n\tname: \"libdl_android\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tandroid_x86_64_shared: \"android_x86_64_shared/libdl_android.so\",\n\tandroid_x86_x86_64_shared: \"android_x86_x86_64_shared/libdl_android.so\",\n\tsrcs: [\"android_x86_64_shared/libdl_android.so\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"\",], stubs: { versions: [\"current\",], }, stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_shared {\n\tname: \"libdl.ndk\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tsdk_version: \"current\",\n\tsdk_variant_only: true,\n\tandroid_x86_64_sdk_shared_21: \"android_x86_64_sdk_shared_21/libdl.ndk.so\",\n\tandroid_x86_64_sdk_shared_29: \"android_x86_64_sdk_shared_29/libdl.ndk.so\",\n\tandroid_x86_64_sdk_shared_30: \"android_x86_64_sdk_shared_30/libdl.ndk.so\",\n\tandroid_x86_64_sdk_shared_current: \"android_x86_64_sdk_shared_current/libdl.ndk.so\",\n\tsrcs: [\"android_x86_64_sdk_shared_21/libdl.ndk.so\"],\n\ttarget: { android: { compile_multilib: \"64\",  }, },\n\trequired: [],\n\tstubs: { versions: [\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"REL\",\"current\",], }, \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library {\n\tname: \"libdl\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_shared: \"android_recovery_x86_64_shared/libdl.so\",\n\tandroid_vendor_31_x86_64_shared: \"android_vendor.31_x86_64_shared/libdl.so\",\n\tandroid_vendor_31_x86_x86_64_shared: \"android_vendor.31_x86_x86_64_shared/libdl.so\",\n\tandroid_x86_64_shared: \"android_x86_64_shared/libdl.so\",\n\tandroid_x86_64_shared_apex10000: \"android_x86_64_shared_apex10000/libdl.so\",\n\tandroid_x86_64_shared_current: \"android_x86_64_shared_current/libdl.so\",\n\tandroid_x86_64_static: \"android_x86_64_static/libdl.a\",\n\tandroid_x86_x86_64_shared: \"android_x86_x86_64_shared/libdl.so\",\n\tandroid_x86_x86_64_shared_apex10000: \"android_x86_x86_64_shared_apex10000/libdl.so\",\n\tandroid_x86_x86_64_shared_current: \"android_x86_x86_64_shared_current/libdl.so\",\n\tsrcs: [\"android_x86_64_shared/libdl.so\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"\",], stubs: { versions: [\"29\",\"current\",], }, stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library {\n\tname: \"libm\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_shared: \"android_recovery_x86_64_shared/libm.so\",\n\tandroid_vendor_31_x86_64_shared: \"android_vendor.31_x86_64_shared/libm.so\",\n\tandroid_vendor_31_x86_x86_64_shared: \"android_vendor.31_x86_x86_64_shared/libm.so\",\n\tandroid_x86_64_shared: \"android_x86_64_shared/libm.so\",\n\tandroid_x86_64_shared_apex10000: \"android_x86_64_shared_apex10000/libm.so\",\n\tandroid_x86_64_shared_current: \"android_x86_64_shared_current/libm.so\",\n\tandroid_x86_64_static: \"android_x86_64_static/libm.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libm.a\",\n\tandroid_x86_x86_64_shared: \"android_x86_x86_64_shared/libm.so\",\n\tandroid_x86_x86_64_shared_apex10000: \"android_x86_x86_64_shared_apex10000/libm.so\",\n\tandroid_x86_x86_64_shared_current: \"android_x86_x86_64_shared_current/libm.so\",\n\tsrcs: [\"android_x86_64_shared/libm.so\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tsystem_shared_libs: [\"libc\",], stubs: { versions: [\"29\",\"current\",], }, stl: \"none\", apex_available: [\"//apex_available:platform\",\"com.android.runtime\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_shared {\n\tname: \"libm.ndk\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\tsdk_version: \"current\",\n\tsdk_variant_only: true,\n\tandroid_x86_64_sdk_shared_21: \"android_x86_64_sdk_shared_21/libm.ndk.so\",\n\tandroid_x86_64_sdk_shared_29: \"android_x86_64_sdk_shared_29/libm.ndk.so\",\n\tandroid_x86_64_sdk_shared_30: \"android_x86_64_sdk_shared_30/libm.ndk.so\",\n\tandroid_x86_64_sdk_shared_current: \"android_x86_64_sdk_shared_current/libm.ndk.so\",\n\tsrcs: [\"android_x86_64_sdk_shared_21/libm.ndk.so\"],\n\ttarget: { android: { compile_multilib: \"64\",  }, },\n\trequired: [],\n\tstubs: { versions: [\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"REL\",\"current\",], }, \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/bionic/Android.bp
        printf "\n" >> prebuiltlibs/bionic/Android.bp
        popd
    - name: Archive bionic-0
      uses: actions/upload-artifact@v3
      with:
        name: bionic-0
        path: aosp/prebuiltlibs/bionic
  build_step_2:
    runs-on: ubuntu-latest
    needs: [build_step_1,clone_bootstrap,clone_prebuilts]
    steps:
    - name: Checkout
      uses: actions/checkout@main

    - name: Restore Cache build/make
      id: build_make
      uses: actions/cache@v3
      with:
        path: "aosp/build/make"
        key: "build_make@$BRANCH"
        restore-keys: "build_make@$BRANCH"
    - name: Restore Cache build/blueprint
      id: build_blueprint
      uses: actions/cache@v3
      with:
        path: "aosp/build/blueprint"
        key: "build_blueprint@$BRANCH"
        restore-keys: "build_blueprint@$BRANCH"
    - name: Restore Cache build/soong
      id: build_soong
      uses: actions/cache@v3
      with:
        path: "aosp/build/soong"
        key: "build_soong@$BRANCH"
        restore-keys: "build_soong@$BRANCH"
    - name: Restore Cache bionic
      id: bionic
      uses: actions/cache@v3
      with:
        path: "aosp/bionic"
        key: "bionic@$BRANCH"
        restore-keys: "bionic@$BRANCH"
    - name: Restore Cache external/golang-protobuf
      id: external_golang-protobuf
      uses: actions/cache@v3
      with:
        path: "aosp/external/golang-protobuf"
        key: "external_golang-protobuf@$BRANCH"
        restore-keys: "external_golang-protobuf@$BRANCH"
    - name: Restore Cache external/starlark-go
      id: external_starlark-go
      uses: actions/cache@v3
      with:
        path: "aosp/external/starlark-go"
        key: "external_starlark-go@$BRANCH"
        restore-keys: "external_starlark-go@$BRANCH"
    - name: Restore Cache system/core
      id: system_core
      uses: actions/cache@v3
      with:
        path: "aosp/system/core"
        key: "system_core@$BRANCH"
        restore-keys: "system_core@$BRANCH"
    - name: Restore Cache system/libbase
      id: system_libbase
      uses: actions/cache@v3
      with:
        path: "aosp/system/libbase"
        key: "system_libbase@$BRANCH"
        restore-keys: "system_libbase@$BRANCH"
    - name: Restore Cache system/libhwbinder
      id: system_libhwbinder
      uses: actions/cache@v3
      with:
        path: "aosp/system/libhwbinder"
        key: "system_libhwbinder@$BRANCH"
        restore-keys: "system_libhwbinder@$BRANCH"
    - name: Restore Cache system/logging
      id: system_logging
      uses: actions/cache@v3
      with:
        path: "aosp/system/logging"
        key: "system_logging@$BRANCH"
        restore-keys: "system_logging@$BRANCH"
    - name: Restore Cache system/sepolicy
      id: system_sepolicy
      uses: actions/cache@v3
      with:
        path: "aosp/system/sepolicy"
        key: "system_sepolicy@$BRANCH"
        restore-keys: "system_sepolicy@$BRANCH"
    - name: Restore Cache kernel/configs
      id: kernel_configs
      uses: actions/cache@v3
      with:
        path: "aosp/kernel/configs"
        key: "kernel_configs@$BRANCH"
        restore-keys: "kernel_configs@$BRANCH"
    - name: Restore Cache prebuilts/build-tools
      id: prebuilts_build-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/build-tools"
        key: "prebuilts_build-tools@$BRANCH"
        restore-keys: "prebuilts_build-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang-tools
      id: prebuilts_clang-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang-tools"
        key: "prebuilts_clang-tools@$BRANCH"
        restore-keys: "prebuilts_clang-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang/host/linux-x86
      id: prebuilts_clang_host_linux-x86
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang/host/linux-x86"
        key: "prebuilts_clang_host_linux-x86@$BRANCH"
        restore-keys: "prebuilts_clang_host_linux-x86@$BRANCH"
    - name: Restore Cache prebuilts/ndk
      id: prebuilts_ndk
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/ndk"
        key: "prebuilts_ndk@$BRANCH"
        restore-keys: "prebuilts_ndk@$BRANCH"
    - name: Copy and Link
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        cp build/make/core/root.mk Makefile
        ln -sf make/CleanSpec.mk build/ && ln -sf make/core build/
        ln -sf make/target build/ && ln -sf make/tools build/
        ln -sf build/soong/root.bp Android.bp
        mkdir -p prebuilts/go && touch prebuilts/go/.out-dir
        ln -sf $GOROOT_1_19_X64 prebuilts/go/linux-x86
        popd
    - name: Download artifact bionic-0
      uses: actions/download-artifact@v3
      with:
        name: bionic-0
        path: aosp/prebuiltlibs/bionic
    - name: Restore Cache external/libcxx
      id: external_libcxx
      uses: actions/cache@v3
      with:
        path: "aosp/external/libcxx"
        key: "external_libcxx@$BRANCH"
        restore-keys: "external_libcxx@$BRANCH"
    - name: Clone project external/libcxx
      if: steps.external_libcxx.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/libcxx
    - name: Download artifact bionic-0
      uses: actions/download-artifact@v3
      with:
        name: bionic-0
        path: aosp/prebuiltlibs/bionic
    - name: Restore Cache external/libcxxabi
      id: external_libcxxabi
      uses: actions/cache@v3
      with:
        path: "aosp/external/libcxxabi"
        key: "external_libcxxabi@$BRANCH"
        restore-keys: "external_libcxxabi@$BRANCH"
    - name: Clone project external/libcxxabi
      if: steps.external_libcxxabi.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/libcxxabi
    - name: Start Soong
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        mkdir -p out/soong/.minibootstrap out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/soong_build out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/bpglob out/soong/.minibootstrap
        cp $ROOTDIR/ckati prebuilts/build-tools/linux-x86/bin
        GOROOT=$TOP/prebuilts/go/linux-x86 $ROOTDIR/soong_ui --make-mode --skip-soong-tests --skip-write-modules -j1 TARGET_PRODUCT=aosp_x86_64 TARGET_BUILD_VARIANT=eng ALLOW_MISSING_DEPENDENCIES=true BUILD_BROKEN_DISABLE_BAZEL=1 nothing
        popd
    - name: build target external_libcxx-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/external/libcxx/libc++/android_recovery_x86_64_shared/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_vendor.31_x86_64_shared/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_vendor.31_x86_x86_64_shared/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex10000/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex29/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex31/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex10000/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex29/libc++.so out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex31/libc++.so out/soong/.intermediates/external/libcxx/libc++/linux_glibc_x86_64_shared/libc++.so out/soong/.intermediates/external/libcxx/libc++fs/android_recovery_x86_64_static/libc++fs.a out/soong/.intermediates/external/libcxx/libc++fs/android_x86_64_static/libc++fs.a out/soong/.intermediates/external/libcxx/libc++fs/android_x86_x86_64_static/libc++fs.a out/soong/.intermediates/external/libcxx/libc++fs/linux_glibc_x86_64_static/libc++fs.a out/soong/.intermediates/external/libcxx/libc++_static/android_recovery_x86_64_static/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_recovery_x86_64_static_lto-thin/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_64_static/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_64_static_lto-thin/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static_cfi/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static_lto-thin/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex10000/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex29/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex30/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex31/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_apex29/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_lto-thin/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_lto-thin_apex29/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex29/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex30/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex31/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex10000/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex29/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex30/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex31/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_cfi/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin_apex30/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin_apex31/libc++_static.a out/soong/.intermediates/external/libcxx/libc++_static/linux_glibc_x86_64_static/libc++_static.a)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target external_libcxx-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_recovery_x86_64_shared/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_recovery_x86_64_shared/ && cp out/soong/.intermediates/external/libcxx/libc++/android_recovery_x86_64_shared/libc++.so prebuiltlibs/external/libcxx/android_recovery_x86_64_shared/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_vendor.31_x86_64_shared/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_64_shared/ && cp out/soong/.intermediates/external/libcxx/libc++/android_vendor.31_x86_64_shared/libc++.so prebuiltlibs/external/libcxx/android_vendor.31_x86_64_shared/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_vendor.31_x86_x86_64_shared/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_shared/ && cp out/soong/.intermediates/external/libcxx/libc++/android_vendor.31_x86_x86_64_shared/libc++.so prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_shared/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared/libc++.so prebuiltlibs/external/libcxx/android_x86_64_shared/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex10000/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_shared_apex10000/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex10000/libc++.so prebuiltlibs/external/libcxx/android_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex29/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_shared_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex29/libc++.so prebuiltlibs/external/libcxx/android_x86_64_shared_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex31/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_shared_apex31/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_64_shared_apex31/libc++.so prebuiltlibs/external/libcxx/android_x86_64_shared_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_shared/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared/libc++.so prebuiltlibs/external/libcxx/android_x86_x86_64_shared/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex10000/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_shared_apex10000/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex10000/libc++.so prebuiltlibs/external/libcxx/android_x86_x86_64_shared_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex29/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_shared_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex29/libc++.so prebuiltlibs/external/libcxx/android_x86_x86_64_shared_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex31/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_shared_apex31/ && cp out/soong/.intermediates/external/libcxx/libc++/android_x86_x86_64_shared_apex31/libc++.so prebuiltlibs/external/libcxx/android_x86_x86_64_shared_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++/linux_glibc_x86_64_shared/libc++.so ] && mkdir -p prebuiltlibs/external/libcxx/linux_glibc_x86_64_shared/ && cp out/soong/.intermediates/external/libcxx/libc++/linux_glibc_x86_64_shared/libc++.so prebuiltlibs/external/libcxx/linux_glibc_x86_64_shared/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++fs/android_recovery_x86_64_static/libc++fs.a ] && mkdir -p prebuiltlibs/external/libcxx/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++fs/android_recovery_x86_64_static/libc++fs.a prebuiltlibs/external/libcxx/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++fs/android_x86_64_static/libc++fs.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++fs/android_x86_64_static/libc++fs.a prebuiltlibs/external/libcxx/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++fs/android_x86_x86_64_static/libc++fs.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++fs/android_x86_x86_64_static/libc++fs.a prebuiltlibs/external/libcxx/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++fs/linux_glibc_x86_64_static/libc++fs.a ] && mkdir -p prebuiltlibs/external/libcxx/linux_glibc_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++fs/linux_glibc_x86_64_static/libc++fs.a prebuiltlibs/external/libcxx/linux_glibc_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_recovery_x86_64_static/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_recovery_x86_64_static/libc++_static.a prebuiltlibs/external/libcxx/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_recovery_x86_64_static_lto-thin/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_recovery_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_recovery_x86_64_static_lto-thin/libc++_static.a prebuiltlibs/external/libcxx/android_recovery_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_64_static/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_64_static/libc++_static.a prebuiltlibs/external/libcxx/android_vendor.31_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_64_static_lto-thin/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_64_static_lto-thin/libc++_static.a prebuiltlibs/external/libcxx/android_vendor.31_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static/libc++_static.a prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static_cfi/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_static_cfi/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static_cfi/libc++_static.a prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_static_cfi/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static_lto-thin/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_vendor.31_x86_x86_64_static_lto-thin/libc++_static.a prebuiltlibs/external/libcxx/android_vendor.31_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex10000/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex10000/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex29/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex29/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex30/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_apex30/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex30/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex31/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_apex31/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_apex31/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_cfi/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_cfi/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_apex29/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_cfi_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_apex29/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_cfi_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_lto-thin/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_cfi_lto-thin/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_lto-thin/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_cfi_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_lto-thin_apex29/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_cfi_lto-thin_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_cfi_lto-thin_apex29/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_cfi_lto-thin_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex29/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex29/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex30/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin_apex30/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex30/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex31/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin_apex31/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_64_static_lto-thin_apex31/libc++_static.a prebuiltlibs/external/libcxx/android_x86_64_static_lto-thin_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex10000/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex10000/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex29/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex29/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex29/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex30/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex30/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex30/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex31/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex31/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_apex31/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_cfi/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_cfi/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_cfi/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_cfi/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin_apex30/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_lto-thin_apex30/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin_apex30/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_lto-thin_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin_apex31/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/android_x86_x86_64_static_lto-thin_apex31/ && cp out/soong/.intermediates/external/libcxx/libc++_static/android_x86_x86_64_static_lto-thin_apex31/libc++_static.a prebuiltlibs/external/libcxx/android_x86_x86_64_static_lto-thin_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxx/libc++_static/linux_glibc_x86_64_static/libc++_static.a ] && mkdir -p prebuiltlibs/external/libcxx/linux_glibc_x86_64_static/ && cp out/soong/.intermediates/external/libcxx/libc++_static/linux_glibc_x86_64_static/libc++_static.a prebuiltlibs/external/libcxx/linux_glibc_x86_64_static/ || true
        cp -r out/soong/ninja/external/libcxx prebuiltlibs/external/libcxx/external_libcxx-0
        grep '|external/libcxx' out/soong/module-info.txt >> prebuiltlibs/external/libcxx/MODULES
        du -ad1 external/libcxx | sort -rnk1 > prebuiltlibs/external/libcxx/.SIZE
        popd
    - name: write Android.bp external_libcxx-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library_shared {\n\tname: \"libc++\",\n\tdevice_supported: true,\n\thost_supported: true,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_shared: \"android_recovery_x86_64_shared/libc++.so\",\n\tandroid_vendor_31_x86_64_shared: \"android_vendor.31_x86_64_shared/libc++.so\",\n\tandroid_vendor_31_x86_x86_64_shared: \"android_vendor.31_x86_x86_64_shared/libc++.so\",\n\tandroid_x86_64_shared: \"android_x86_64_shared/libc++.so\",\n\tandroid_x86_64_shared_apex10000: \"android_x86_64_shared_apex10000/libc++.so\",\n\tandroid_x86_64_shared_apex29: \"android_x86_64_shared_apex29/libc++.so\",\n\tandroid_x86_64_shared_apex31: \"android_x86_64_shared_apex31/libc++.so\",\n\tandroid_x86_x86_64_shared: \"android_x86_x86_64_shared/libc++.so\",\n\tandroid_x86_x86_64_shared_apex10000: \"android_x86_x86_64_shared_apex10000/libc++.so\",\n\tandroid_x86_x86_64_shared_apex29: \"android_x86_x86_64_shared_apex29/libc++.so\",\n\tandroid_x86_x86_64_shared_apex31: \"android_x86_x86_64_shared_apex31/libc++.so\",\n\tlinux_glibc_x86_64_shared: \"linux_glibc_x86_64_shared/libc++.so\",\n\tsrcs: [\"android_x86_64_shared/libc++.so\"],\n\ttarget: { host: { compile_multilib: \"64\",  }, android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"apex_inherit\", stl: \"none\", vndk: { enabled: true, }, apex_available: [\"//apex_available:anyapex\",\"//apex_available:platform\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_static {\n\tname: \"libc++fs\",\n\tdevice_supported: true,\n\thost_supported: true,\n\tvendor_available: false,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libc++fs.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libc++fs.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libc++fs.a\",\n\tlinux_glibc_x86_64_static: \"linux_glibc_x86_64_static/libc++fs.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libc++fs.a\"],\n\ttarget: { host: { compile_multilib: \"64\",  }, android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tstl: \"none\", \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_static {\n\tname: \"libc++_static\",\n\tdevice_supported: true,\n\thost_supported: true,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libc++_static.a\",\n\tandroid_recovery_x86_64_static_lto_thin: \"android_recovery_x86_64_static_lto-thin/libc++_static.a\",\n\tandroid_vendor_31_x86_64_static: \"android_vendor.31_x86_64_static/libc++_static.a\",\n\tandroid_vendor_31_x86_64_static_lto_thin: \"android_vendor.31_x86_64_static_lto-thin/libc++_static.a\",\n\tandroid_vendor_31_x86_x86_64_static: \"android_vendor.31_x86_x86_64_static/libc++_static.a\",\n\tandroid_vendor_31_x86_x86_64_static_cfi: \"android_vendor.31_x86_x86_64_static_cfi/libc++_static.a\",\n\tandroid_vendor_31_x86_x86_64_static_lto_thin: \"android_vendor.31_x86_x86_64_static_lto-thin/libc++_static.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libc++_static.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libc++_static.a\",\n\tandroid_x86_64_static_apex29: \"android_x86_64_static_apex29/libc++_static.a\",\n\tandroid_x86_64_static_apex30: \"android_x86_64_static_apex30/libc++_static.a\",\n\tandroid_x86_64_static_apex31: \"android_x86_64_static_apex31/libc++_static.a\",\n\tandroid_x86_64_static_cfi: \"android_x86_64_static_cfi/libc++_static.a\",\n\tandroid_x86_64_static_cfi_apex29: \"android_x86_64_static_cfi_apex29/libc++_static.a\",\n\tandroid_x86_64_static_cfi_lto_thin: \"android_x86_64_static_cfi_lto-thin/libc++_static.a\",\n\tandroid_x86_64_static_cfi_lto_thin_apex29: \"android_x86_64_static_cfi_lto-thin_apex29/libc++_static.a\",\n\tandroid_x86_64_static_lto_thin: \"android_x86_64_static_lto-thin/libc++_static.a\",\n\tandroid_x86_64_static_lto_thin_apex29: \"android_x86_64_static_lto-thin_apex29/libc++_static.a\",\n\tandroid_x86_64_static_lto_thin_apex30: \"android_x86_64_static_lto-thin_apex30/libc++_static.a\",\n\tandroid_x86_64_static_lto_thin_apex31: \"android_x86_64_static_lto-thin_apex31/libc++_static.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libc++_static.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libc++_static.a\",\n\tandroid_x86_x86_64_static_apex29: \"android_x86_x86_64_static_apex29/libc++_static.a\",\n\tandroid_x86_x86_64_static_apex30: \"android_x86_x86_64_static_apex30/libc++_static.a\",\n\tandroid_x86_x86_64_static_apex31: \"android_x86_x86_64_static_apex31/libc++_static.a\",\n\tandroid_x86_x86_64_static_cfi: \"android_x86_x86_64_static_cfi/libc++_static.a\",\n\tandroid_x86_x86_64_static_lto_thin: \"android_x86_x86_64_static_lto-thin/libc++_static.a\",\n\tandroid_x86_x86_64_static_lto_thin_apex30: \"android_x86_x86_64_static_lto-thin_apex30/libc++_static.a\",\n\tandroid_x86_x86_64_static_lto_thin_apex31: \"android_x86_x86_64_static_lto-thin_apex31/libc++_static.a\",\n\tlinux_glibc_x86_64_static: \"linux_glibc_x86_64_static/libc++_static.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libc++_static.a\"],\n\ttarget: { host: { compile_multilib: \"64\",  }, android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"apex_inherit\", stl: \"none\", apex_available: [\"//apex_available:anyapex\",\"//apex_available:platform\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/external/libcxx/Android.bp
        printf "\n" >> prebuiltlibs/external/libcxx/Android.bp
        popd
    - name: Archive external_libcxx-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libcxx-0
        path: aosp/prebuiltlibs/external/libcxx
    - name: build target external_libcxxabi-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/external/libcxxabi/libc++demangle/android_recovery_x86_64_static/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_recovery_x86_64_static_lto-thin/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_64_static/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_64_static_lto-thin/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_x86_64_static/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_x86_64_static_lto-thin/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex10000/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex29/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex30/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex31/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex29/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex30/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex31/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex10000/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex29/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex30/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex31/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin_apex30/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin_apex31/libc++demangle.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_recovery_x86_64_static/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_recovery_x86_64_static_lto-thin/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_64_static/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_64_static_lto-thin/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_x86_64_static/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_x86_64_static_lto-thin/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex10000/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex29/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex30/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex31/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex29/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex30/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex31/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex10000/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex29/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex30/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex31/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin_apex30/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin_apex31/libc++abi.a out/soong/.intermediates/external/libcxxabi/libc++abi/linux_glibc_x86_64_static/libc++abi.a)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target external_libcxxabi-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_recovery_x86_64_static/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_recovery_x86_64_static/libc++demangle.a prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_recovery_x86_64_static_lto-thin/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_recovery_x86_64_static_lto-thin/libc++demangle.a prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_64_static/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_64_static/libc++demangle.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_64_static_lto-thin/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_64_static_lto-thin/libc++demangle.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_x86_64_static/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_x86_64_static/libc++demangle.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_x86_64_static_lto-thin/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_vendor.31_x86_x86_64_static_lto-thin/libc++demangle.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex10000/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex10000/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex29/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex29/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex29/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex30/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex30/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex31/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_apex31/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex29/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex29/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex29/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex30/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex30/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex31/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_64_static_lto-thin_apex31/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex10000/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex10000/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex29/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex29/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex29/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex30/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex30/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex31/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_apex31/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin_apex30/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin_apex30/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin_apex31/libc++demangle.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++demangle/android_x86_x86_64_static_lto-thin_apex31/libc++demangle.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_recovery_x86_64_static/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_recovery_x86_64_static/libc++abi.a prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_recovery_x86_64_static_lto-thin/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_recovery_x86_64_static_lto-thin/libc++abi.a prebuiltlibs/external/libcxxabi/android_recovery_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_64_static/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_64_static/libc++abi.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_64_static_lto-thin/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_64_static_lto-thin/libc++abi.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_x86_64_static/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_x86_64_static/libc++abi.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_x86_64_static_lto-thin/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_vendor.31_x86_x86_64_static_lto-thin/libc++abi.a prebuiltlibs/external/libcxxabi/android_vendor.31_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex10000/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex10000/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex29/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex29/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex29/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex30/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex30/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex31/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_apex31/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex29/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex29/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex29/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex30/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex30/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex31/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_64_static_lto-thin_apex31/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_64_static_lto-thin_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex10000/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex10000/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex29/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex29/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex29/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex29/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex30/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex30/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex31/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_apex31/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin_apex30/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex30/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin_apex30/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex30/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin_apex31/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex31/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/android_x86_x86_64_static_lto-thin_apex31/libc++abi.a prebuiltlibs/external/libcxxabi/android_x86_x86_64_static_lto-thin_apex31/ || true
        [ -e out/soong/.intermediates/external/libcxxabi/libc++abi/linux_glibc_x86_64_static/libc++abi.a ] && mkdir -p prebuiltlibs/external/libcxxabi/linux_glibc_x86_64_static/ && cp out/soong/.intermediates/external/libcxxabi/libc++abi/linux_glibc_x86_64_static/libc++abi.a prebuiltlibs/external/libcxxabi/linux_glibc_x86_64_static/ || true
        cp -r out/soong/ninja/external/libcxxabi prebuiltlibs/external/libcxxabi/external_libcxxabi-0
        grep '|external/libcxxabi' out/soong/module-info.txt >> prebuiltlibs/external/libcxxabi/MODULES
        du -ad1 external/libcxxabi | sort -rnk1 > prebuiltlibs/external/libcxxabi/.SIZE
        popd
    - name: write Android.bp external_libcxxabi-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library_static {\n\tname: \"libc++demangle\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libc++demangle.a\",\n\tandroid_recovery_x86_64_static_lto_thin: \"android_recovery_x86_64_static_lto-thin/libc++demangle.a\",\n\tandroid_vendor_31_x86_64_static: \"android_vendor.31_x86_64_static/libc++demangle.a\",\n\tandroid_vendor_31_x86_64_static_lto_thin: \"android_vendor.31_x86_64_static_lto-thin/libc++demangle.a\",\n\tandroid_vendor_31_x86_x86_64_static: \"android_vendor.31_x86_x86_64_static/libc++demangle.a\",\n\tandroid_vendor_31_x86_x86_64_static_lto_thin: \"android_vendor.31_x86_x86_64_static_lto-thin/libc++demangle.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libc++demangle.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libc++demangle.a\",\n\tandroid_x86_64_static_apex29: \"android_x86_64_static_apex29/libc++demangle.a\",\n\tandroid_x86_64_static_apex30: \"android_x86_64_static_apex30/libc++demangle.a\",\n\tandroid_x86_64_static_apex31: \"android_x86_64_static_apex31/libc++demangle.a\",\n\tandroid_x86_64_static_lto_thin: \"android_x86_64_static_lto-thin/libc++demangle.a\",\n\tandroid_x86_64_static_lto_thin_apex29: \"android_x86_64_static_lto-thin_apex29/libc++demangle.a\",\n\tandroid_x86_64_static_lto_thin_apex30: \"android_x86_64_static_lto-thin_apex30/libc++demangle.a\",\n\tandroid_x86_64_static_lto_thin_apex31: \"android_x86_64_static_lto-thin_apex31/libc++demangle.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libc++demangle.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libc++demangle.a\",\n\tandroid_x86_x86_64_static_apex29: \"android_x86_x86_64_static_apex29/libc++demangle.a\",\n\tandroid_x86_x86_64_static_apex30: \"android_x86_x86_64_static_apex30/libc++demangle.a\",\n\tandroid_x86_x86_64_static_apex31: \"android_x86_x86_64_static_apex31/libc++demangle.a\",\n\tandroid_x86_x86_64_static_lto_thin: \"android_x86_x86_64_static_lto-thin/libc++demangle.a\",\n\tandroid_x86_x86_64_static_lto_thin_apex30: \"android_x86_x86_64_static_lto-thin_apex30/libc++demangle.a\",\n\tandroid_x86_x86_64_static_lto_thin_apex31: \"android_x86_x86_64_static_lto-thin_apex31/libc++demangle.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libc++demangle.a\"],\n\ttarget: { android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"apex_inherit\", stl: \"none\", apex_available: [\"//apex_available:anyapex\",\"//apex_available:platform\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}\ncc_prebuilt_library_static {\n\tname: \"libc++abi\",\n\tdevice_supported: true,\n\thost_supported: true,\n\tvendor_available: true,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libc++abi.a\",\n\tandroid_recovery_x86_64_static_lto_thin: \"android_recovery_x86_64_static_lto-thin/libc++abi.a\",\n\tandroid_vendor_31_x86_64_static: \"android_vendor.31_x86_64_static/libc++abi.a\",\n\tandroid_vendor_31_x86_64_static_lto_thin: \"android_vendor.31_x86_64_static_lto-thin/libc++abi.a\",\n\tandroid_vendor_31_x86_x86_64_static: \"android_vendor.31_x86_x86_64_static/libc++abi.a\",\n\tandroid_vendor_31_x86_x86_64_static_lto_thin: \"android_vendor.31_x86_x86_64_static_lto-thin/libc++abi.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libc++abi.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libc++abi.a\",\n\tandroid_x86_64_static_apex29: \"android_x86_64_static_apex29/libc++abi.a\",\n\tandroid_x86_64_static_apex30: \"android_x86_64_static_apex30/libc++abi.a\",\n\tandroid_x86_64_static_apex31: \"android_x86_64_static_apex31/libc++abi.a\",\n\tandroid_x86_64_static_lto_thin: \"android_x86_64_static_lto-thin/libc++abi.a\",\n\tandroid_x86_64_static_lto_thin_apex29: \"android_x86_64_static_lto-thin_apex29/libc++abi.a\",\n\tandroid_x86_64_static_lto_thin_apex30: \"android_x86_64_static_lto-thin_apex30/libc++abi.a\",\n\tandroid_x86_64_static_lto_thin_apex31: \"android_x86_64_static_lto-thin_apex31/libc++abi.a\",\n\tandroid_x86_x86_64_static: \"android_x86_x86_64_static/libc++abi.a\",\n\tandroid_x86_x86_64_static_apex10000: \"android_x86_x86_64_static_apex10000/libc++abi.a\",\n\tandroid_x86_x86_64_static_apex29: \"android_x86_x86_64_static_apex29/libc++abi.a\",\n\tandroid_x86_x86_64_static_apex30: \"android_x86_x86_64_static_apex30/libc++abi.a\",\n\tandroid_x86_x86_64_static_apex31: \"android_x86_x86_64_static_apex31/libc++abi.a\",\n\tandroid_x86_x86_64_static_lto_thin: \"android_x86_x86_64_static_lto-thin/libc++abi.a\",\n\tandroid_x86_x86_64_static_lto_thin_apex30: \"android_x86_x86_64_static_lto-thin_apex30/libc++abi.a\",\n\tandroid_x86_x86_64_static_lto_thin_apex31: \"android_x86_x86_64_static_lto-thin_apex31/libc++abi.a\",\n\tlinux_glibc_x86_64_static: \"linux_glibc_x86_64_static/libc++abi.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libc++abi.a\"],\n\ttarget: { host: { compile_multilib: \"64\",  }, android: { compile_multilib: \"both\",  }, },\n\trequired: [],\n\tmin_sdk_version: \"apex_inherit\", stl: \"none\", apex_available: [\"//apex_available:anyapex\",\"//apex_available:platform\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/external/libcxxabi/Android.bp
        printf "\n" >> prebuiltlibs/external/libcxxabi/Android.bp
        popd
    - name: Archive external_libcxxabi-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libcxxabi-0
        path: aosp/prebuiltlibs/external/libcxxabi
  build_step_3:
    runs-on: ubuntu-latest
    needs: [build_step_1,build_step_2,clone_bootstrap,clone_prebuilts]
    steps:
    - name: Checkout
      uses: actions/checkout@main

    - name: Restore Cache build/make
      id: build_make
      uses: actions/cache@v3
      with:
        path: "aosp/build/make"
        key: "build_make@$BRANCH"
        restore-keys: "build_make@$BRANCH"
    - name: Restore Cache build/blueprint
      id: build_blueprint
      uses: actions/cache@v3
      with:
        path: "aosp/build/blueprint"
        key: "build_blueprint@$BRANCH"
        restore-keys: "build_blueprint@$BRANCH"
    - name: Restore Cache build/soong
      id: build_soong
      uses: actions/cache@v3
      with:
        path: "aosp/build/soong"
        key: "build_soong@$BRANCH"
        restore-keys: "build_soong@$BRANCH"
    - name: Restore Cache bionic
      id: bionic
      uses: actions/cache@v3
      with:
        path: "aosp/bionic"
        key: "bionic@$BRANCH"
        restore-keys: "bionic@$BRANCH"
    - name: Restore Cache external/golang-protobuf
      id: external_golang-protobuf
      uses: actions/cache@v3
      with:
        path: "aosp/external/golang-protobuf"
        key: "external_golang-protobuf@$BRANCH"
        restore-keys: "external_golang-protobuf@$BRANCH"
    - name: Restore Cache external/starlark-go
      id: external_starlark-go
      uses: actions/cache@v3
      with:
        path: "aosp/external/starlark-go"
        key: "external_starlark-go@$BRANCH"
        restore-keys: "external_starlark-go@$BRANCH"
    - name: Restore Cache system/core
      id: system_core
      uses: actions/cache@v3
      with:
        path: "aosp/system/core"
        key: "system_core@$BRANCH"
        restore-keys: "system_core@$BRANCH"
    - name: Restore Cache system/libbase
      id: system_libbase
      uses: actions/cache@v3
      with:
        path: "aosp/system/libbase"
        key: "system_libbase@$BRANCH"
        restore-keys: "system_libbase@$BRANCH"
    - name: Restore Cache system/libhwbinder
      id: system_libhwbinder
      uses: actions/cache@v3
      with:
        path: "aosp/system/libhwbinder"
        key: "system_libhwbinder@$BRANCH"
        restore-keys: "system_libhwbinder@$BRANCH"
    - name: Restore Cache system/logging
      id: system_logging
      uses: actions/cache@v3
      with:
        path: "aosp/system/logging"
        key: "system_logging@$BRANCH"
        restore-keys: "system_logging@$BRANCH"
    - name: Restore Cache system/sepolicy
      id: system_sepolicy
      uses: actions/cache@v3
      with:
        path: "aosp/system/sepolicy"
        key: "system_sepolicy@$BRANCH"
        restore-keys: "system_sepolicy@$BRANCH"
    - name: Restore Cache kernel/configs
      id: kernel_configs
      uses: actions/cache@v3
      with:
        path: "aosp/kernel/configs"
        key: "kernel_configs@$BRANCH"
        restore-keys: "kernel_configs@$BRANCH"
    - name: Restore Cache prebuilts/build-tools
      id: prebuilts_build-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/build-tools"
        key: "prebuilts_build-tools@$BRANCH"
        restore-keys: "prebuilts_build-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang-tools
      id: prebuilts_clang-tools
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang-tools"
        key: "prebuilts_clang-tools@$BRANCH"
        restore-keys: "prebuilts_clang-tools@$BRANCH"
    - name: Restore Cache prebuilts/clang/host/linux-x86
      id: prebuilts_clang_host_linux-x86
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/clang/host/linux-x86"
        key: "prebuilts_clang_host_linux-x86@$BRANCH"
        restore-keys: "prebuilts_clang_host_linux-x86@$BRANCH"
    - name: Restore Cache prebuilts/ndk
      id: prebuilts_ndk
      uses: actions/cache@v3
      with:
        path: "aosp/prebuilts/ndk"
        key: "prebuilts_ndk@$BRANCH"
        restore-keys: "prebuilts_ndk@$BRANCH"
    - name: Copy and Link
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        cp build/make/core/root.mk Makefile
        ln -sf make/CleanSpec.mk build/ && ln -sf make/core build/
        ln -sf make/target build/ && ln -sf make/tools build/
        ln -sf build/soong/root.bp Android.bp
        mkdir -p prebuilts/go && touch prebuilts/go/.out-dir
        ln -sf $GOROOT_1_19_X64 prebuilts/go/linux-x86
        popd
    - name: Restore Cache external/libcxx
      id: external_libcxx
      uses: actions/cache@v3
      with:
        path: "aosp/external/libcxx"
        key: "external_libcxx@$BRANCH"
        restore-keys: "external_libcxx@$BRANCH"
    - name: Clone project external/libcxx
      if: steps.external_libcxx.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/libcxx
    - name: Restore Cache external/libcxxabi
      id: external_libcxxabi
      uses: actions/cache@v3
      with:
        path: "aosp/external/libcxxabi"
        key: "external_libcxxabi@$BRANCH"
        restore-keys: "external_libcxxabi@$BRANCH"
    - name: Clone project external/libcxxabi
      if: steps.external_libcxxabi.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/libcxxabi
    - name: Download artifact external_libcxx-0
      uses: actions/download-artifact@v3
      with:
        name: external_libcxx-0
        path: aosp/prebuiltlibs/external/libcxx
    - name: Download artifact external_libcxxabi-0
      uses: actions/download-artifact@v3
      with:
        name: external_libcxxabi-0
        path: aosp/prebuiltlibs/external/libcxxabi
    - name: Download artifact bionic-0
      uses: actions/download-artifact@v3
      with:
        name: bionic-0
        path: aosp/prebuiltlibs/bionic
    - name: Restore Cache external/zstd
      id: external_zstd
      uses: actions/cache@v3
      with:
        path: "aosp/external/zstd"
        key: "external_zstd@$BRANCH"
        restore-keys: "external_zstd@$BRANCH"
    - name: Clone project external/zstd
      if: steps.external_zstd.outputs.cache-hit != 'true'
      run: |
        export ROOTDIR=$(pwd)
        mkdir -p aosp && pushd aosp
        source $ROOTDIR/envsetup.sh
        clone_depth_platform external/zstd
    - name: Start Soong
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        mkdir -p out/soong/.minibootstrap out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/soong_build out/soong/.bootstrap/bin
        ln -sf $ROOTDIR/bpglob out/soong/.minibootstrap
        cp $ROOTDIR/ckati prebuilts/build-tools/linux-x86/bin
        GOROOT=$TOP/prebuilts/go/linux-x86 $ROOTDIR/soong_ui --make-mode --skip-soong-tests --skip-write-modules -j1 TARGET_PRODUCT=aosp_x86_64 TARGET_BUILD_VARIANT=eng ALLOW_MISSING_DEPENDENCIES=true BUILD_BROKEN_DISABLE_BAZEL=1 nothing
        popd
    - name: build target external_zstd-0
      run: |
        export ROOTDIR=$(pwd)
        pushd aosp
        export TOP=$(pwd)
        outputs=$($ROOTDIR/filter-outputs.py out/soong/.intermediates/external/zstd/libzstd/android_recovery_x86_64_static/libzstd.a out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static/libzstd.a out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static_apex10000/libzstd.a out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static_cfi_lto-thin/libzstd.a)
        $TOP/prebuilts/build-tools/linux-x86/bin/ninja -f out/combined-aosp_x86_64.ninja $outputs
        popd
    - name: copy target external_zstd-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        [ -e out/soong/.intermediates/external/zstd/libzstd/android_recovery_x86_64_static/libzstd.a ] && mkdir -p prebuiltlibs/external/zstd/android_recovery_x86_64_static/ && cp out/soong/.intermediates/external/zstd/libzstd/android_recovery_x86_64_static/libzstd.a prebuiltlibs/external/zstd/android_recovery_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static/libzstd.a ] && mkdir -p prebuiltlibs/external/zstd/android_x86_64_static/ && cp out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static/libzstd.a prebuiltlibs/external/zstd/android_x86_64_static/ || true
        [ -e out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static_apex10000/libzstd.a ] && mkdir -p prebuiltlibs/external/zstd/android_x86_64_static_apex10000/ && cp out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static_apex10000/libzstd.a prebuiltlibs/external/zstd/android_x86_64_static_apex10000/ || true
        [ -e out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static_cfi_lto-thin/libzstd.a ] && mkdir -p prebuiltlibs/external/zstd/android_x86_64_static_cfi_lto-thin/ && cp out/soong/.intermediates/external/zstd/libzstd/android_x86_64_static_cfi_lto-thin/libzstd.a prebuiltlibs/external/zstd/android_x86_64_static_cfi_lto-thin/ || true
        cp -r out/soong/ninja/external/zstd prebuiltlibs/external/zstd/external_zstd-0
        grep '|external/zstd' out/soong/module-info.txt >> prebuiltlibs/external/zstd/MODULES
        du -ad1 external/zstd | sort -rnk1 > prebuiltlibs/external/zstd/.SIZE
        popd
    - name: write Android.bp external_zstd-0
      run: |
        export ROOTDIR=$(pwd)
        export TOP=$(pwd)
        pushd aosp
        printf "cc_prebuilt_library {\n\tname: \"libzstd\",\n\tdevice_supported: true,\n\thost_supported: false,\n\tvendor_available: false,\n\trecovery_available: true,\n\tandroid_recovery_x86_64_static: \"android_recovery_x86_64_static/libzstd.a\",\n\tandroid_x86_64_static: \"android_x86_64_static/libzstd.a\",\n\tandroid_x86_64_static_apex10000: \"android_x86_64_static_apex10000/libzstd.a\",\n\tandroid_x86_64_static_cfi_lto_thin: \"android_x86_64_static_cfi_lto-thin/libzstd.a\",\n\tsrcs: [\"android_recovery_x86_64_static/libzstd.a\"],\n\ttarget: { android: { compile_multilib: \"64\",  }, },\n\trequired: [],\n\tapex_available: [\"//apex_available:platform\",\"com.android.adbd\",], \n\tprefer: true,\n\tstrip: { none: true, },\n}" >> prebuiltlibs/external/zstd/Android.bp
        printf "\n" >> prebuiltlibs/external/zstd/Android.bp
        popd
    - name: Archive external_zstd-0
      uses: actions/upload-artifact@v3
      with:
        name: external_zstd-0
        path: aosp/prebuiltlibs/external/zstd
