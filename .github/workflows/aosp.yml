
name: AOSP Build
on: push
env:
  branch: 'android-12.0.0_r1'
jobs:

  build_step0:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@main
    - name: Call Composite Action bootstrap
      uses: ./.github/actions/bootstrap
      id: bootstrap

    - name: Restore Cache external/arm-optimized-routines
      id: external_arm-optimized-routines
      uses: actions/cache@v3
      with:
        path: aosp/external/arm-optimized-routines
        key: external_arm-optimized-routines@${{ env.branch }}
        restore-keys: external_arm-optimized-routines@${{ env.branch }}
    - name: Clone project external/arm-optimized-routines
      if: steps.external_arm-optimized-routines.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/arm-optimized-routines
    - name: Restore Cache external/rust/crates/bitflags
      id: external_rust_crates_bitflags
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/bitflags
        key: external_rust_crates_bitflags@${{ env.branch }}
        restore-keys: external_rust_crates_bitflags@${{ env.branch }}
    - name: Clone project external/rust/crates/bitflags
      if: steps.external_rust_crates_bitflags.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/bitflags
    - name: Restore Cache external/rust/crates/bytes
      id: external_rust_crates_bytes
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/bytes
        key: external_rust_crates_bytes@${{ env.branch }}
        restore-keys: external_rust_crates_bytes@${{ env.branch }}
    - name: Clone project external/rust/crates/bytes
      if: steps.external_rust_crates_bytes.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/bytes
    - name: Restore Cache external/rust/crates/either
      id: external_rust_crates_either
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/either
        key: external_rust_crates_either@${{ env.branch }}
        restore-keys: external_rust_crates_either@${{ env.branch }}
    - name: Clone project external/rust/crates/either
      if: steps.external_rust_crates_either.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/either
    - name: Restore Cache external/rust/crates/fallible-iterator
      id: external_rust_crates_fallible-iterator
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/fallible-iterator
        key: external_rust_crates_fallible-iterator@${{ env.branch }}
        restore-keys: external_rust_crates_fallible-iterator@${{ env.branch }}
    - name: Clone project external/rust/crates/fallible-iterator
      if: steps.external_rust_crates_fallible-iterator.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/fallible-iterator
    - name: Restore Cache external/rust/crates/fallible-streaming-iterator
      id: external_rust_crates_fallible-streaming-iterator
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/fallible-streaming-iterator
        key: external_rust_crates_fallible-streaming-iterator@${{ env.branch }}
        restore-keys: external_rust_crates_fallible-streaming-iterator@${{ env.branch }}
    - name: Clone project external/rust/crates/fallible-streaming-iterator
      if: steps.external_rust_crates_fallible-streaming-iterator.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/fallible-streaming-iterator
    - name: Restore Cache external/rust/crates/futures-core
      id: external_rust_crates_futures-core
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/futures-core
        key: external_rust_crates_futures-core@${{ env.branch }}
        restore-keys: external_rust_crates_futures-core@${{ env.branch }}
    - name: Clone project external/rust/crates/futures-core
      if: steps.external_rust_crates_futures-core.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/futures-core
    - name: Restore Cache external/rust/crates/futures-io
      id: external_rust_crates_futures-io
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/futures-io
        key: external_rust_crates_futures-io@${{ env.branch }}
        restore-keys: external_rust_crates_futures-io@${{ env.branch }}
    - name: Clone project external/rust/crates/futures-io
      if: steps.external_rust_crates_futures-io.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/futures-io
    - name: Restore Cache external/rust/crates/futures-sink
      id: external_rust_crates_futures-sink
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/futures-sink
        key: external_rust_crates_futures-sink@${{ env.branch }}
        restore-keys: external_rust_crates_futures-sink@${{ env.branch }}
    - name: Clone project external/rust/crates/futures-sink
      if: steps.external_rust_crates_futures-sink.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/futures-sink
    - name: Restore Cache external/rust/crates/futures-task
      id: external_rust_crates_futures-task
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/futures-task
        key: external_rust_crates_futures-task@${{ env.branch }}
        restore-keys: external_rust_crates_futures-task@${{ env.branch }}
    - name: Clone project external/rust/crates/futures-task
      if: steps.external_rust_crates_futures-task.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/futures-task
    - name: Restore Cache external/rust/crates/glob
      id: external_rust_crates_glob
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/glob
        key: external_rust_crates_glob@${{ env.branch }}
        restore-keys: external_rust_crates_glob@${{ env.branch }}
    - name: Clone project external/rust/crates/glob
      if: steps.external_rust_crates_glob.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/glob
    - name: Restore Cache external/rust/crates/lazycell
      id: external_rust_crates_lazycell
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/lazycell
        key: external_rust_crates_lazycell@${{ env.branch }}
        restore-keys: external_rust_crates_lazycell@${{ env.branch }}
    - name: Clone project external/rust/crates/lazycell
      if: steps.external_rust_crates_lazycell.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/lazycell
    - name: Restore Cache external/rust/crates/memchr
      id: external_rust_crates_memchr
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/memchr
        key: external_rust_crates_memchr@${{ env.branch }}
        restore-keys: external_rust_crates_memchr@${{ env.branch }}
    - name: Clone project external/rust/crates/memchr
      if: steps.external_rust_crates_memchr.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/memchr
    - name: Restore Cache external/rust/crates/paste
      id: external_rust_crates_paste
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/paste
        key: external_rust_crates_paste@${{ env.branch }}
        restore-keys: external_rust_crates_paste@${{ env.branch }}
    - name: Clone project external/rust/crates/paste
      if: steps.external_rust_crates_paste.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/paste
    - name: Restore Cache external/rust/crates/peeking_take_while
      id: external_rust_crates_peeking_take_while
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/peeking_take_while
        key: external_rust_crates_peeking_take_while@${{ env.branch }}
        restore-keys: external_rust_crates_peeking_take_while@${{ env.branch }}
    - name: Clone project external/rust/crates/peeking_take_while
      if: steps.external_rust_crates_peeking_take_while.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/peeking_take_while
    - name: Restore Cache external/rust/crates/pin-project-lite
      id: external_rust_crates_pin-project-lite
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/pin-project-lite
        key: external_rust_crates_pin-project-lite@${{ env.branch }}
        restore-keys: external_rust_crates_pin-project-lite@${{ env.branch }}
    - name: Clone project external/rust/crates/pin-project-lite
      if: steps.external_rust_crates_pin-project-lite.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/pin-project-lite
    - name: Restore Cache external/rust/crates/pin-utils
      id: external_rust_crates_pin-utils
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/pin-utils
        key: external_rust_crates_pin-utils@${{ env.branch }}
        restore-keys: external_rust_crates_pin-utils@${{ env.branch }}
    - name: Clone project external/rust/crates/pin-utils
      if: steps.external_rust_crates_pin-utils.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/pin-utils
    - name: Restore Cache external/rust/crates/proc-macro-hack
      id: external_rust_crates_proc-macro-hack
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/proc-macro-hack
        key: external_rust_crates_proc-macro-hack@${{ env.branch }}
        restore-keys: external_rust_crates_proc-macro-hack@${{ env.branch }}
    - name: Clone project external/rust/crates/proc-macro-hack
      if: steps.external_rust_crates_proc-macro-hack.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/proc-macro-hack
    - name: Restore Cache external/rust/crates/proc-macro-nested
      id: external_rust_crates_proc-macro-nested
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/proc-macro-nested
        key: external_rust_crates_proc-macro-nested@${{ env.branch }}
        restore-keys: external_rust_crates_proc-macro-nested@${{ env.branch }}
    - name: Clone project external/rust/crates/proc-macro-nested
      if: steps.external_rust_crates_proc-macro-nested.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/proc-macro-nested
    - name: Restore Cache external/rust/crates/regex-syntax
      id: external_rust_crates_regex-syntax
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/regex-syntax
        key: external_rust_crates_regex-syntax@${{ env.branch }}
        restore-keys: external_rust_crates_regex-syntax@${{ env.branch }}
    - name: Clone project external/rust/crates/regex-syntax
      if: steps.external_rust_crates_regex-syntax.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/regex-syntax
    - name: Restore Cache external/rust/crates/rustc-hash
      id: external_rust_crates_rustc-hash
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/rustc-hash
        key: external_rust_crates_rustc-hash@${{ env.branch }}
        restore-keys: external_rust_crates_rustc-hash@${{ env.branch }}
    - name: Clone project external/rust/crates/rustc-hash
      if: steps.external_rust_crates_rustc-hash.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/rustc-hash
    - name: Restore Cache external/rust/crates/scopeguard
      id: external_rust_crates_scopeguard
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/scopeguard
        key: external_rust_crates_scopeguard@${{ env.branch }}
        restore-keys: external_rust_crates_scopeguard@${{ env.branch }}
    - name: Clone project external/rust/crates/scopeguard
      if: steps.external_rust_crates_scopeguard.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/scopeguard
    - name: Restore Cache external/rust/crates/shlex
      id: external_rust_crates_shlex
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/shlex
        key: external_rust_crates_shlex@${{ env.branch }}
        restore-keys: external_rust_crates_shlex@${{ env.branch }}
    - name: Clone project external/rust/crates/shlex
      if: steps.external_rust_crates_shlex.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/shlex
    - name: Restore Cache external/rust/crates/slab
      id: external_rust_crates_slab
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/slab
        key: external_rust_crates_slab@${{ env.branch }}
        restore-keys: external_rust_crates_slab@${{ env.branch }}
    - name: Clone project external/rust/crates/slab
      if: steps.external_rust_crates_slab.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/slab
    - name: Restore Cache external/rust/crates/smallvec
      id: external_rust_crates_smallvec
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/smallvec
        key: external_rust_crates_smallvec@${{ env.branch }}
        restore-keys: external_rust_crates_smallvec@${{ env.branch }}
    - name: Clone project external/rust/crates/smallvec
      if: steps.external_rust_crates_smallvec.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/smallvec
    - name: Restore Cache external/rust/crates/termcolor
      id: external_rust_crates_termcolor
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/termcolor
        key: external_rust_crates_termcolor@${{ env.branch }}
        restore-keys: external_rust_crates_termcolor@${{ env.branch }}
    - name: Clone project external/rust/crates/termcolor
      if: steps.external_rust_crates_termcolor.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/termcolor
    - name: Restore Cache external/rust/crates/textwrap
      id: external_rust_crates_textwrap
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/textwrap
        key: external_rust_crates_textwrap@${{ env.branch }}
        restore-keys: external_rust_crates_textwrap@${{ env.branch }}
    - name: Clone project external/rust/crates/textwrap
      if: steps.external_rust_crates_textwrap.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/textwrap
    - name: Restore Cache external/rust/crates/unicode-width
      id: external_rust_crates_unicode-width
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/unicode-width
        key: external_rust_crates_unicode-width@${{ env.branch }}
        restore-keys: external_rust_crates_unicode-width@${{ env.branch }}
    - name: Clone project external/rust/crates/unicode-width
      if: steps.external_rust_crates_unicode-width.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/unicode-width
    - name: Restore Cache external/rust/crates/unicode-xid
      id: external_rust_crates_unicode-xid
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/unicode-xid
        key: external_rust_crates_unicode-xid@${{ env.branch }}
        restore-keys: external_rust_crates_unicode-xid@${{ env.branch }}
    - name: Clone project external/rust/crates/unicode-xid
      if: steps.external_rust_crates_unicode-xid.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/unicode-xid
    - name: Restore Cache external/scudo
      id: external_scudo
      uses: actions/cache@v3
      with:
        path: aosp/external/scudo
        key: external_scudo@${{ env.branch }}
        restore-keys: external_scudo@${{ env.branch }}
    - name: Clone project external/scudo
      if: steps.external_scudo.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/scudo

    - name: Build Step-0
      run: |
        pushd aosp
        export TOP=$(pwd)
        $GITHUB_WORKSPACE/steps/build_step0.sh
        df -h

    - name: Archive external_arm-optimized-routines-0
      uses: actions/upload-artifact@v3
      with:
        name: external_arm-optimized-routines-0
        path: aosp/external_arm-optimized-routines-0.tar.xz
    - name: Archive external_gwp_asan-0
      uses: actions/upload-artifact@v3
      with:
        name: external_gwp_asan-0
        path: aosp/external_gwp_asan-0.tar.xz
    - name: Archive external_rust_crates_bitflags-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_bitflags-0
        path: aosp/external_rust_crates_bitflags-0.tar.xz
    - name: Archive external_rust_crates_bytes-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_bytes-0
        path: aosp/external_rust_crates_bytes-0.tar.xz
    - name: Archive external_rust_crates_either-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_either-0
        path: aosp/external_rust_crates_either-0.tar.xz
    - name: Archive external_rust_crates_fallible-iterator-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_fallible-iterator-0
        path: aosp/external_rust_crates_fallible-iterator-0.tar.xz
    - name: Archive external_rust_crates_fallible-streaming-iterator-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_fallible-streaming-iterator-0
        path: aosp/external_rust_crates_fallible-streaming-iterator-0.tar.xz
    - name: Archive external_rust_crates_futures-core-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_futures-core-0
        path: aosp/external_rust_crates_futures-core-0.tar.xz
    - name: Archive external_rust_crates_futures-io-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_futures-io-0
        path: aosp/external_rust_crates_futures-io-0.tar.xz
    - name: Archive external_rust_crates_futures-sink-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_futures-sink-0
        path: aosp/external_rust_crates_futures-sink-0.tar.xz
    - name: Archive external_rust_crates_futures-task-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_futures-task-0
        path: aosp/external_rust_crates_futures-task-0.tar.xz
    - name: Archive external_rust_crates_glob-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_glob-0
        path: aosp/external_rust_crates_glob-0.tar.xz
    - name: Archive external_rust_crates_lazycell-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_lazycell-0
        path: aosp/external_rust_crates_lazycell-0.tar.xz
    - name: Archive external_rust_crates_memchr-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_memchr-0
        path: aosp/external_rust_crates_memchr-0.tar.xz
    - name: Archive external_rust_crates_paste-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_paste-0
        path: aosp/external_rust_crates_paste-0.tar.xz
    - name: Archive external_rust_crates_peeking_take_while-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_peeking_take_while-0
        path: aosp/external_rust_crates_peeking_take_while-0.tar.xz
    - name: Archive external_rust_crates_pin-project-lite-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_pin-project-lite-0
        path: aosp/external_rust_crates_pin-project-lite-0.tar.xz
    - name: Archive external_rust_crates_pin-utils-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_pin-utils-0
        path: aosp/external_rust_crates_pin-utils-0.tar.xz
    - name: Archive external_rust_crates_proc-macro-hack-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_proc-macro-hack-0
        path: aosp/external_rust_crates_proc-macro-hack-0.tar.xz
    - name: Archive external_rust_crates_proc-macro-nested-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_proc-macro-nested-0
        path: aosp/external_rust_crates_proc-macro-nested-0.tar.xz
    - name: Archive external_rust_crates_regex-syntax-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_regex-syntax-0
        path: aosp/external_rust_crates_regex-syntax-0.tar.xz
    - name: Archive external_rust_crates_rustc-hash-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_rustc-hash-0
        path: aosp/external_rust_crates_rustc-hash-0.tar.xz
    - name: Archive external_rust_crates_scopeguard-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_scopeguard-0
        path: aosp/external_rust_crates_scopeguard-0.tar.xz
    - name: Archive external_rust_crates_shlex-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_shlex-0
        path: aosp/external_rust_crates_shlex-0.tar.xz
    - name: Archive external_rust_crates_slab-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_slab-0
        path: aosp/external_rust_crates_slab-0.tar.xz
    - name: Archive external_rust_crates_smallvec-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_smallvec-0
        path: aosp/external_rust_crates_smallvec-0.tar.xz
    - name: Archive external_rust_crates_termcolor-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_termcolor-0
        path: aosp/external_rust_crates_termcolor-0.tar.xz
    - name: Archive external_rust_crates_textwrap-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_textwrap-0
        path: aosp/external_rust_crates_textwrap-0.tar.xz
    - name: Archive external_rust_crates_unicode-width-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_unicode-width-0
        path: aosp/external_rust_crates_unicode-width-0.tar.xz
    - name: Archive external_rust_crates_unicode-xid-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_unicode-xid-0
        path: aosp/external_rust_crates_unicode-xid-0.tar.xz
    - name: Archive external_scudo-0
      uses: actions/upload-artifact@v3
      with:
        name: external_scudo-0
        path: aosp/external_scudo-0.tar.xz
    - name: Archive system_core-0
      uses: actions/upload-artifact@v3
      with:
        name: system_core-0
        path: aosp/system_core-0.tar.xz

    - name: Restore Cache external/rust/crates/nom
      id: external_rust_crates_nom
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/nom
        key: external_rust_crates_nom@${{ env.branch }}
        restore-keys: external_rust_crates_nom@${{ env.branch }}
    - name: Clone project external/rust/crates/nom
      if: steps.external_rust_crates_nom.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/nom
    - name: Restore Cache external/rust/crates/protobuf
      id: external_rust_crates_protobuf
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/protobuf
        key: external_rust_crates_protobuf@${{ env.branch }}
        restore-keys: external_rust_crates_protobuf@${{ env.branch }}
    - name: Clone project external/rust/crates/protobuf
      if: steps.external_rust_crates_protobuf.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/protobuf
    - name: Restore Cache external/rust/crates/aho-corasick
      id: external_rust_crates_aho-corasick
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/aho-corasick
        key: external_rust_crates_aho-corasick@${{ env.branch }}
        restore-keys: external_rust_crates_aho-corasick@${{ env.branch }}
    - name: Clone project external/rust/crates/aho-corasick
      if: steps.external_rust_crates_aho-corasick.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/aho-corasick
    - name: Restore Cache external/rust/crates/clap
      id: external_rust_crates_clap
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/clap
        key: external_rust_crates_clap@${{ env.branch }}
        restore-keys: external_rust_crates_clap@${{ env.branch }}
    - name: Clone project external/rust/crates/clap
      if: steps.external_rust_crates_clap.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/clap
    - name: Restore Cache external/rust/crates/codespan-reporting
      id: external_rust_crates_codespan-reporting
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/codespan-reporting
        key: external_rust_crates_codespan-reporting@${{ env.branch }}
        restore-keys: external_rust_crates_codespan-reporting@${{ env.branch }}
    - name: Clone project external/rust/crates/codespan-reporting
      if: steps.external_rust_crates_codespan-reporting.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/codespan-reporting
    - name: Restore Cache external/rust/crates/futures-channel
      id: external_rust_crates_futures-channel
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/futures-channel
        key: external_rust_crates_futures-channel@${{ env.branch }}
        restore-keys: external_rust_crates_futures-channel@${{ env.branch }}
    - name: Clone project external/rust/crates/futures-channel
      if: steps.external_rust_crates_futures-channel.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/futures-channel
    - name: Restore Cache external/rust/crates/lock_api
      id: external_rust_crates_lock_api
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/lock_api
        key: external_rust_crates_lock_api@${{ env.branch }}
        restore-keys: external_rust_crates_lock_api@${{ env.branch }}
    - name: Clone project external/rust/crates/lock_api
      if: steps.external_rust_crates_lock_api.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/lock_api
    - name: Restore Cache external/rust/crates/proc-macro2
      id: external_rust_crates_proc-macro2
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/proc-macro2
        key: external_rust_crates_proc-macro2@${{ env.branch }}
        restore-keys: external_rust_crates_proc-macro2@${{ env.branch }}
    - name: Clone project external/rust/crates/proc-macro2
      if: steps.external_rust_crates_proc-macro2.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/proc-macro2

    - name: Build Step-1
      run: |
        pushd aosp
        export TOP=$(pwd)
        $GITHUB_WORKSPACE/steps/build_step1.sh
        df -h

    - name: Archive bionic-0
      uses: actions/upload-artifact@v3
      with:
        name: bionic-0
        path: aosp/bionic-0.tar.xz
    - name: Archive external_rust_crates_nom-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_nom-0
        path: aosp/external_rust_crates_nom-0.tar.xz
    - name: Archive external_rust_crates_protobuf-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_protobuf-0
        path: aosp/external_rust_crates_protobuf-0.tar.xz
    - name: Archive external_rust_crates_aho-corasick-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_aho-corasick-0
        path: aosp/external_rust_crates_aho-corasick-0.tar.xz
    - name: Archive external_rust_crates_clap-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_clap-0
        path: aosp/external_rust_crates_clap-0.tar.xz
    - name: Archive external_rust_crates_codespan-reporting-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_codespan-reporting-0
        path: aosp/external_rust_crates_codespan-reporting-0.tar.xz
    - name: Archive external_rust_crates_futures-channel-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_futures-channel-0
        path: aosp/external_rust_crates_futures-channel-0.tar.xz
    - name: Archive external_rust_crates_lock_api-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_lock_api-0
        path: aosp/external_rust_crates_lock_api-0.tar.xz
    - name: Archive external_rust_crates_proc-macro2-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_proc-macro2-0
        path: aosp/external_rust_crates_proc-macro2-0.tar.xz

    - name: Restore Cache external/zlib
      id: external_zlib
      uses: actions/cache@v3
      with:
        path: aosp/external/zlib
        key: external_zlib@${{ env.branch }}
        restore-keys: external_zlib@${{ env.branch }}
    - name: Clone project external/zlib
      if: steps.external_zlib.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/zlib
    - name: Restore Cache external/bc
      id: external_bc
      uses: actions/cache@v3
      with:
        path: aosp/external/bc
        key: external_bc@${{ env.branch }}
        restore-keys: external_bc@${{ env.branch }}
    - name: Clone project external/bc
      if: steps.external_bc.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/bc
    - name: Restore Cache external/brotli
      id: external_brotli
      uses: actions/cache@v3
      with:
        path: aosp/external/brotli
        key: external_brotli@${{ env.branch }}
        restore-keys: external_brotli@${{ env.branch }}
    - name: Clone project external/brotli
      if: steps.external_brotli.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/brotli
    - name: Restore Cache external/bzip2
      id: external_bzip2
      uses: actions/cache@v3
      with:
        path: aosp/external/bzip2
        key: external_bzip2@${{ env.branch }}
        restore-keys: external_bzip2@${{ env.branch }}
    - name: Clone project external/bzip2
      if: steps.external_bzip2.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/bzip2
    - name: Restore Cache external/expat
      id: external_expat
      uses: actions/cache@v3
      with:
        path: aosp/external/expat
        key: external_expat@${{ env.branch }}
        restore-keys: external_expat@${{ env.branch }}
    - name: Clone project external/expat
      if: steps.external_expat.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/expat
    - name: Restore Cache external/fft2d
      id: external_fft2d
      uses: actions/cache@v3
      with:
        path: aosp/external/fft2d
        key: external_fft2d@${{ env.branch }}
        restore-keys: external_fft2d@${{ env.branch }}
    - name: Clone project external/fft2d
      if: steps.external_fft2d.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/fft2d
    - name: Restore Cache external/libfuse
      id: external_libfuse
      uses: actions/cache@v3
      with:
        path: aosp/external/libfuse
        key: external_libfuse@${{ env.branch }}
        restore-keys: external_libfuse@${{ env.branch }}
    - name: Clone project external/libfuse
      if: steps.external_libfuse.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libfuse
    - name: Restore Cache external/lua
      id: external_lua
      uses: actions/cache@v3
      with:
        path: aosp/external/lua
        key: external_lua@${{ env.branch }}
        restore-keys: external_lua@${{ env.branch }}
    - name: Clone project external/lua
      if: steps.external_lua.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/lua
    - name: Restore Cache external/lzma
      id: external_lzma
      uses: actions/cache@v3
      with:
        path: aosp/external/lzma
        key: external_lzma@${{ env.branch }}
        restore-keys: external_lzma@${{ env.branch }}
    - name: Clone project external/lzma
      if: steps.external_lzma.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/lzma
    - name: Restore Cache external/marisa-trie
      id: external_marisa-trie
      uses: actions/cache@v3
      with:
        path: aosp/external/marisa-trie
        key: external_marisa-trie@${{ env.branch }}
        restore-keys: external_marisa-trie@${{ env.branch }}
    - name: Clone project external/marisa-trie
      if: steps.external_marisa-trie.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/marisa-trie
    - name: Restore Cache external/mksh
      id: external_mksh
      uses: actions/cache@v3
      with:
        path: aosp/external/mksh
        key: external_mksh@${{ env.branch }}
        restore-keys: external_mksh@${{ env.branch }}
    - name: Clone project external/mksh
      if: steps.external_mksh.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/mksh
    - name: Restore Cache external/one-true-awk
      id: external_one-true-awk
      uses: actions/cache@v3
      with:
        path: aosp/external/one-true-awk
        key: external_one-true-awk@${{ env.branch }}
        restore-keys: external_one-true-awk@${{ env.branch }}
    - name: Clone project external/one-true-awk
      if: steps.external_one-true-awk.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/one-true-awk
    - name: Restore Cache external/pcre
      id: external_pcre
      uses: actions/cache@v3
      with:
        path: aosp/external/pcre
        key: external_pcre@${{ env.branch }}
        restore-keys: external_pcre@${{ env.branch }}
    - name: Clone project external/pcre
      if: steps.external_pcre.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/pcre
    - name: Restore Cache external/rust/crates/cexpr
      id: external_rust_crates_cexpr
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/cexpr
        key: external_rust_crates_cexpr@${{ env.branch }}
        restore-keys: external_rust_crates_cexpr@${{ env.branch }}
    - name: Clone project external/rust/crates/cexpr
      if: steps.external_rust_crates_cexpr.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/cexpr
    - name: Restore Cache external/rust/crates/quote
      id: external_rust_crates_quote
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/quote
        key: external_rust_crates_quote@${{ env.branch }}
        restore-keys: external_rust_crates_quote@${{ env.branch }}
    - name: Clone project external/rust/crates/quote
      if: steps.external_rust_crates_quote.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/quote
    - name: Restore Cache external/rust/crates/regex
      id: external_rust_crates_regex
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/regex
        key: external_rust_crates_regex@${{ env.branch }}
        restore-keys: external_rust_crates_regex@${{ env.branch }}
    - name: Clone project external/rust/crates/regex
      if: steps.external_rust_crates_regex.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/regex

    - name: Build Step-2
      run: |
        pushd aosp
        export TOP=$(pwd)
        $GITHUB_WORKSPACE/steps/build_step2.sh
        df -h

    - name: Archive external_zlib-0
      uses: actions/upload-artifact@v3
      with:
        name: external_zlib-0
        path: aosp/external_zlib-0.tar.xz
    - name: Archive external_bc-0
      uses: actions/upload-artifact@v3
      with:
        name: external_bc-0
        path: aosp/external_bc-0.tar.xz
    - name: Archive external_brotli-0
      uses: actions/upload-artifact@v3
      with:
        name: external_brotli-0
        path: aosp/external_brotli-0.tar.xz
    - name: Archive external_bzip2-0
      uses: actions/upload-artifact@v3
      with:
        name: external_bzip2-0
        path: aosp/external_bzip2-0.tar.xz
    - name: Archive external_expat-0
      uses: actions/upload-artifact@v3
      with:
        name: external_expat-0
        path: aosp/external_expat-0.tar.xz
    - name: Archive external_fft2d-0
      uses: actions/upload-artifact@v3
      with:
        name: external_fft2d-0
        path: aosp/external_fft2d-0.tar.xz
    - name: Archive external_libcxxabi-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libcxxabi-0
        path: aosp/external_libcxxabi-0.tar.xz
    - name: Archive external_libfuse-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libfuse-0
        path: aosp/external_libfuse-0.tar.xz
    - name: Archive external_lua-0
      uses: actions/upload-artifact@v3
      with:
        name: external_lua-0
        path: aosp/external_lua-0.tar.xz
    - name: Archive external_lzma-0
      uses: actions/upload-artifact@v3
      with:
        name: external_lzma-0
        path: aosp/external_lzma-0.tar.xz
    - name: Archive external_marisa-trie-0
      uses: actions/upload-artifact@v3
      with:
        name: external_marisa-trie-0
        path: aosp/external_marisa-trie-0.tar.xz
    - name: Archive external_mksh-0
      uses: actions/upload-artifact@v3
      with:
        name: external_mksh-0
        path: aosp/external_mksh-0.tar.xz
    - name: Archive external_one-true-awk-0
      uses: actions/upload-artifact@v3
      with:
        name: external_one-true-awk-0
        path: aosp/external_one-true-awk-0.tar.xz
    - name: Archive external_pcre-0
      uses: actions/upload-artifact@v3
      with:
        name: external_pcre-0
        path: aosp/external_pcre-0.tar.xz
    - name: Archive external_rust_crates_cexpr-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_cexpr-0
        path: aosp/external_rust_crates_cexpr-0.tar.xz
    - name: Archive external_rust_crates_quote-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_quote-0
        path: aosp/external_rust_crates_quote-0.tar.xz
    - name: Archive external_rust_crates_regex-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_regex-0
        path: aosp/external_rust_crates_regex-0.tar.xz

    - name: Restore Cache external/rust/crates/syn
      id: external_rust_crates_syn
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/syn
        key: external_rust_crates_syn@${{ env.branch }}
        restore-keys: external_rust_crates_syn@${{ env.branch }}
    - name: Clone project external/rust/crates/syn
      if: steps.external_rust_crates_syn.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/syn

    - name: Build Step-3
      run: |
        pushd aosp
        export TOP=$(pwd)
        $GITHUB_WORKSPACE/steps/build_step3.sh
        df -h

    - name: Archive external_libcxx-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libcxx-0
        path: aosp/external_libcxx-0.tar.xz
    - name: Archive external_rust_crates_syn-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_syn-0
        path: aosp/external_rust_crates_syn-0.tar.xz

    - name: Restore Cache external/libjpeg-turbo
      id: external_libjpeg-turbo
      uses: actions/cache@v3
      with:
        path: aosp/external/libjpeg-turbo
        key: external_libjpeg-turbo@${{ env.branch }}
        restore-keys: external_libjpeg-turbo@${{ env.branch }}
    - name: Clone project external/libjpeg-turbo
      if: steps.external_libjpeg-turbo.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libjpeg-turbo
    - name: Restore Cache external/libldac
      id: external_libldac
      uses: actions/cache@v3
      with:
        path: aosp/external/libldac
        key: external_libldac@${{ env.branch }}
        restore-keys: external_libldac@${{ env.branch }}
    - name: Clone project external/libldac
      if: steps.external_libldac.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libldac
    - name: Restore Cache external/libopus
      id: external_libopus
      uses: actions/cache@v3
      with:
        path: aosp/external/libopus
        key: external_libopus@${{ env.branch }}
        restore-keys: external_libopus@${{ env.branch }}
    - name: Clone project external/libopus
      if: steps.external_libopus.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libopus
    - name: Restore Cache external/libpcap
      id: external_libpcap
      uses: actions/cache@v3
      with:
        path: aosp/external/libpcap
        key: external_libpcap@${{ env.branch }}
        restore-keys: external_libpcap@${{ env.branch }}
    - name: Clone project external/libpcap
      if: steps.external_libpcap.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libpcap
    - name: Restore Cache external/libtextclassifier
      id: external_libtextclassifier
      uses: actions/cache@v3
      with:
        path: aosp/external/libtextclassifier
        key: external_libtextclassifier@${{ env.branch }}
        restore-keys: external_libtextclassifier@${{ env.branch }}
    - name: Clone project external/libtextclassifier
      if: steps.external_libtextclassifier.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libtextclassifier
    - name: Restore Cache external/libvpx
      id: external_libvpx
      uses: actions/cache@v3
      with:
        path: aosp/external/libvpx
        key: external_libvpx@${{ env.branch }}
        restore-keys: external_libvpx@${{ env.branch }}
    - name: Clone project external/libvpx
      if: steps.external_libvpx.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libvpx
    - name: Restore Cache external/newfs_msdos
      id: external_newfs_msdos
      uses: actions/cache@v3
      with:
        path: aosp/external/newfs_msdos
        key: external_newfs_msdos@${{ env.branch }}
        restore-keys: external_newfs_msdos@${{ env.branch }}
    - name: Clone project external/newfs_msdos
      if: steps.external_newfs_msdos.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/newfs_msdos
    - name: Restore Cache external/oj-libjdwp
      id: external_oj-libjdwp
      uses: actions/cache@v3
      with:
        path: aosp/external/oj-libjdwp
        key: external_oj-libjdwp@${{ env.branch }}
        restore-keys: external_oj-libjdwp@${{ env.branch }}
    - name: Clone project external/oj-libjdwp
      if: steps.external_oj-libjdwp.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/oj-libjdwp
    - name: Restore Cache external/piex
      id: external_piex
      uses: actions/cache@v3
      with:
        path: aosp/external/piex
        key: external_piex@${{ env.branch }}
        restore-keys: external_piex@${{ env.branch }}
    - name: Clone project external/piex
      if: steps.external_piex.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/piex
    - name: Restore Cache external/rust/crates/thiserror-impl
      id: external_rust_crates_thiserror-impl
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/thiserror-impl
        key: external_rust_crates_thiserror-impl@${{ env.branch }}
        restore-keys: external_rust_crates_thiserror-impl@${{ env.branch }}
    - name: Clone project external/rust/crates/thiserror-impl
      if: steps.external_rust_crates_thiserror-impl.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/thiserror-impl
    - name: Restore Cache external/rust/crates/tokio-macros
      id: external_rust_crates_tokio-macros
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/tokio-macros
        key: external_rust_crates_tokio-macros@${{ env.branch }}
        restore-keys: external_rust_crates_tokio-macros@${{ env.branch }}
    - name: Clone project external/rust/crates/tokio-macros
      if: steps.external_rust_crates_tokio-macros.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/tokio-macros
    - name: Restore Cache external/sonic
      id: external_sonic
      uses: actions/cache@v3
      with:
        path: aosp/external/sonic
        key: external_sonic@${{ env.branch }}
        restore-keys: external_sonic@${{ env.branch }}
    - name: Clone project external/sonic
      if: steps.external_sonic.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/sonic
    - name: Restore Cache external/speex
      id: external_speex
      uses: actions/cache@v3
      with:
        path: aosp/external/speex
        key: external_speex@${{ env.branch }}
        restore-keys: external_speex@${{ env.branch }}
    - name: Clone project external/speex
      if: steps.external_speex.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/speex
    - name: Restore Cache external/strace
      id: external_strace
      uses: actions/cache@v3
      with:
        path: aosp/external/strace
        key: external_strace@${{ env.branch }}
        restore-keys: external_strace@${{ env.branch }}
    - name: Clone project external/strace
      if: steps.external_strace.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/strace
    - name: Restore Cache external/tinyalsa
      id: external_tinyalsa
      uses: actions/cache@v3
      with:
        path: aosp/external/tinyalsa
        key: external_tinyalsa@${{ env.branch }}
        restore-keys: external_tinyalsa@${{ env.branch }}
    - name: Clone project external/tinyalsa
      if: steps.external_tinyalsa.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/tinyalsa
    - name: Restore Cache frameworks/compile/mclinker
      id: frameworks_compile_mclinker
      uses: actions/cache@v3
      with:
        path: aosp/frameworks/compile/mclinker
        key: frameworks_compile_mclinker@${{ env.branch }}
        restore-keys: frameworks_compile_mclinker@${{ env.branch }}
    - name: Clone project frameworks/compile/mclinker
      if: steps.frameworks_compile_mclinker.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform frameworks/compile/mclinker
    - name: Restore Cache prebuilts/sdk
      id: prebuilts_sdk
      uses: actions/cache@v3
      with:
        path: aosp/prebuilts/sdk
        key: prebuilts_sdk@${{ env.branch }}
        restore-keys: prebuilts_sdk@${{ env.branch }}
    - name: Clone project prebuilts/sdk
      if: steps.prebuilts_sdk.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform prebuilts/sdk
    - name: Restore Cache external/llvm
      id: external_llvm
      uses: actions/cache@v3
      with:
        path: aosp/external/llvm
        key: external_llvm@${{ env.branch }}
        restore-keys: external_llvm@${{ env.branch }}
    - name: Clone project external/llvm
      if: steps.external_llvm.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/llvm
    - name: Restore Cache system/gatekeeper
      id: system_gatekeeper
      uses: actions/cache@v3
      with:
        path: aosp/system/gatekeeper
        key: system_gatekeeper@${{ env.branch }}
        restore-keys: system_gatekeeper@${{ env.branch }}
    - name: Clone project system/gatekeeper
      if: steps.system_gatekeeper.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform system/gatekeeper
    - name: Restore Cache hardware/libhardware
      id: hardware_libhardware
      uses: actions/cache@v3
      with:
        path: aosp/hardware/libhardware
        key: hardware_libhardware@${{ env.branch }}
        restore-keys: hardware_libhardware@${{ env.branch }}
    - name: Clone project hardware/libhardware
      if: steps.hardware_libhardware.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform hardware/libhardware
    - name: Restore Cache system/tools/mkbootimg
      id: system_tools_mkbootimg
      uses: actions/cache@v3
      with:
        path: aosp/system/tools/mkbootimg
        key: system_tools_mkbootimg@${{ env.branch }}
        restore-keys: system_tools_mkbootimg@${{ env.branch }}
    - name: Clone project system/tools/mkbootimg
      if: steps.system_tools_mkbootimg.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform system/tools/mkbootimg
    - name: Restore Cache tools/dexter
      id: tools_dexter
      uses: actions/cache@v3
      with:
        path: aosp/tools/dexter
        key: tools_dexter@${{ env.branch }}
        restore-keys: tools_dexter@${{ env.branch }}
    - name: Clone project tools/dexter
      if: steps.tools_dexter.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform tools/dexter
    - name: Restore Cache external/bcc
      id: external_bcc
      uses: actions/cache@v3
      with:
        path: aosp/external/bcc
        key: external_bcc@${{ env.branch }}
        restore-keys: external_bcc@${{ env.branch }}
    - name: Clone project external/bcc
      if: steps.external_bcc.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/bcc
    - name: Restore Cache system/bpf
      id: system_bpf
      uses: actions/cache@v3
      with:
        path: aosp/system/bpf
        key: system_bpf@${{ env.branch }}
        restore-keys: system_bpf@${{ env.branch }}
    - name: Clone project system/bpf
      if: steps.system_bpf.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform system/bpf
    - name: Restore Cache external/boringssl
      id: external_boringssl
      uses: actions/cache@v3
      with:
        path: aosp/external/boringssl
        key: external_boringssl@${{ env.branch }}
        restore-keys: external_boringssl@${{ env.branch }}
    - name: Clone project external/boringssl
      if: steps.external_boringssl.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/boringssl
    - name: Restore Cache external/cn-cbor
      id: external_cn-cbor
      uses: actions/cache@v3
      with:
        path: aosp/external/cn-cbor
        key: external_cn-cbor@${{ env.branch }}
        restore-keys: external_cn-cbor@${{ env.branch }}
    - name: Clone project external/cn-cbor
      if: steps.external_cn-cbor.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/cn-cbor
    - name: Restore Cache external/e2fsprogs
      id: external_e2fsprogs
      uses: actions/cache@v3
      with:
        path: aosp/external/e2fsprogs
        key: external_e2fsprogs@${{ env.branch }}
        restore-keys: external_e2fsprogs@${{ env.branch }}
    - name: Clone project external/e2fsprogs
      if: steps.external_e2fsprogs.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/e2fsprogs
    - name: Restore Cache external/flatbuffers
      id: external_flatbuffers
      uses: actions/cache@v3
      with:
        path: aosp/external/flatbuffers
        key: external_flatbuffers@${{ env.branch }}
        restore-keys: external_flatbuffers@${{ env.branch }}
    - name: Clone project external/flatbuffers
      if: steps.external_flatbuffers.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/flatbuffers
    - name: Restore Cache external/fsck_msdos
      id: external_fsck_msdos
      uses: actions/cache@v3
      with:
        path: aosp/external/fsck_msdos
        key: external_fsck_msdos@${{ env.branch }}
        restore-keys: external_fsck_msdos@${{ env.branch }}
    - name: Clone project external/fsck_msdos
      if: steps.external_fsck_msdos.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/fsck_msdos
    - name: Restore Cache external/google-fruit
      id: external_google-fruit
      uses: actions/cache@v3
      with:
        path: aosp/external/google-fruit
        key: external_google-fruit@${{ env.branch }}
        restore-keys: external_google-fruit@${{ env.branch }}
    - name: Clone project external/google-fruit
      if: steps.external_google-fruit.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/google-fruit
    - name: Restore Cache external/iperf3
      id: external_iperf3
      uses: actions/cache@v3
      with:
        path: aosp/external/iperf3
        key: external_iperf3@${{ env.branch }}
        restore-keys: external_iperf3@${{ env.branch }}
    - name: Clone project external/iperf3
      if: steps.external_iperf3.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/iperf3
    - name: Restore Cache external/iptables
      id: external_iptables
      uses: actions/cache@v3
      with:
        path: aosp/external/iptables
        key: external_iptables@${{ env.branch }}
        restore-keys: external_iptables@${{ env.branch }}
    - name: Clone project external/iptables
      if: steps.external_iptables.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/iptables
    - name: Restore Cache external/libdrm
      id: external_libdrm
      uses: actions/cache@v3
      with:
        path: aosp/external/libdrm
        key: external_libdrm@${{ env.branch }}
        restore-keys: external_libdrm@${{ env.branch }}
    - name: Clone project external/libdrm
      if: steps.external_libdrm.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libdrm
    - name: Restore Cache external/libevent
      id: external_libevent
      uses: actions/cache@v3
      with:
        path: aosp/external/libevent
        key: external_libevent@${{ env.branch }}
        restore-keys: external_libevent@${{ env.branch }}
    - name: Clone project external/libevent
      if: steps.external_libevent.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libevent
    - name: Restore Cache external/libgav1
      id: external_libgav1
      uses: actions/cache@v3
      with:
        path: aosp/external/libgav1
        key: external_libgav1@${{ env.branch }}
        restore-keys: external_libgav1@${{ env.branch }}
    - name: Clone project external/libgav1
      if: steps.external_libgav1.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libgav1
    - name: Restore Cache external/libgsm
      id: external_libgsm
      uses: actions/cache@v3
      with:
        path: aosp/external/libgsm
        key: external_libgsm@${{ env.branch }}
        restore-keys: external_libgsm@${{ env.branch }}
    - name: Clone project external/libgsm
      if: steps.external_libgsm.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libgsm
    - name: Restore Cache external/libhevc
      id: external_libhevc
      uses: actions/cache@v3
      with:
        path: aosp/external/libhevc
        key: external_libhevc@${{ env.branch }}
        restore-keys: external_libhevc@${{ env.branch }}
    - name: Clone project external/libhevc
      if: steps.external_libhevc.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libhevc
    - name: Restore Cache external/libnl
      id: external_libnl
      uses: actions/cache@v3
      with:
        path: aosp/external/libnl
        key: external_libnl@${{ env.branch }}
        restore-keys: external_libnl@${{ env.branch }}
    - name: Clone project external/libnl
      if: steps.external_libnl.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libnl
    - name: Restore Cache external/libogg
      id: external_libogg
      uses: actions/cache@v3
      with:
        path: aosp/external/libogg
        key: external_libogg@${{ env.branch }}
        restore-keys: external_libogg@${{ env.branch }}
    - name: Clone project external/libogg
      if: steps.external_libogg.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libogg
    - name: Restore Cache external/libpng
      id: external_libpng
      uses: actions/cache@v3
      with:
        path: aosp/external/libpng
        key: external_libpng@${{ env.branch }}
        restore-keys: external_libpng@${{ env.branch }}
    - name: Clone project external/libpng
      if: steps.external_libpng.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libpng
    - name: Restore Cache external/libutf
      id: external_libutf
      uses: actions/cache@v3
      with:
        path: aosp/external/libutf
        key: external_libutf@${{ env.branch }}
        restore-keys: external_libutf@${{ env.branch }}
    - name: Clone project external/libutf
      if: steps.external_libutf.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libutf
    - name: Restore Cache external/lz4
      id: external_lz4
      uses: actions/cache@v3
      with:
        path: aosp/external/lz4
        key: external_lz4@${{ env.branch }}
        restore-keys: external_lz4@${{ env.branch }}
    - name: Clone project external/lz4
      if: steps.external_lz4.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/lz4
    - name: Restore Cache external/modp_b64
      id: external_modp_b64
      uses: actions/cache@v3
      with:
        path: aosp/external/modp_b64
        key: external_modp_b64@${{ env.branch }}
        restore-keys: external_modp_b64@${{ env.branch }}
    - name: Clone project external/modp_b64
      if: steps.external_modp_b64.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/modp_b64
    - name: Restore Cache external/nanopb-c
      id: external_nanopb-c
      uses: actions/cache@v3
      with:
        path: aosp/external/nanopb-c
        key: external_nanopb-c@${{ env.branch }}
        restore-keys: external_nanopb-c@${{ env.branch }}
    - name: Clone project external/nanopb-c
      if: steps.external_nanopb-c.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/nanopb-c
    - name: Restore Cache external/rust/crates/futures-macro
      id: external_rust_crates_futures-macro
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/futures-macro
        key: external_rust_crates_futures-macro@${{ env.branch }}
        restore-keys: external_rust_crates_futures-macro@${{ env.branch }}
    - name: Clone project external/rust/crates/futures-macro
      if: steps.external_rust_crates_futures-macro.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/futures-macro
    - name: Restore Cache external/rust/crates/num-derive
      id: external_rust_crates_num-derive
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/num-derive
        key: external_rust_crates_num-derive@${{ env.branch }}
        restore-keys: external_rust_crates_num-derive@${{ env.branch }}
    - name: Clone project external/rust/crates/num-derive
      if: steps.external_rust_crates_num-derive.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/num-derive
    - name: Restore Cache external/rust/crates/serde_derive
      id: external_rust_crates_serde_derive
      uses: actions/cache@v3
      with:
        path: aosp/external/rust/crates/serde_derive
        key: external_rust_crates_serde_derive@${{ env.branch }}
        restore-keys: external_rust_crates_serde_derive@${{ env.branch }}
    - name: Clone project external/rust/crates/serde_derive
      if: steps.external_rust_crates_serde_derive.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/rust/crates/serde_derive
    - name: Restore Cache external/ruy
      id: external_ruy
      uses: actions/cache@v3
      with:
        path: aosp/external/ruy
        key: external_ruy@${{ env.branch }}
        restore-keys: external_ruy@${{ env.branch }}
    - name: Clone project external/ruy
      if: steps.external_ruy.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/ruy
    - name: Restore Cache external/vixl
      id: external_vixl
      uses: actions/cache@v3
      with:
        path: aosp/external/vixl
        key: external_vixl@${{ env.branch }}
        restore-keys: external_vixl@${{ env.branch }}
    - name: Clone project external/vixl
      if: steps.external_vixl.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/vixl
    - name: Restore Cache external/webp
      id: external_webp
      uses: actions/cache@v3
      with:
        path: aosp/external/webp
        key: external_webp@${{ env.branch }}
        restore-keys: external_webp@${{ env.branch }}
    - name: Clone project external/webp
      if: steps.external_webp.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/webp
    - name: Restore Cache external/zstd
      id: external_zstd
      uses: actions/cache@v3
      with:
        path: aosp/external/zstd
        key: external_zstd@${{ env.branch }}
        restore-keys: external_zstd@${{ env.branch }}
    - name: Clone project external/zstd
      if: steps.external_zstd.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/zstd
    - name: Restore Cache frameworks/compile/slang
      id: frameworks_compile_slang
      uses: actions/cache@v3
      with:
        path: aosp/frameworks/compile/slang
        key: frameworks_compile_slang@${{ env.branch }}
        restore-keys: frameworks_compile_slang@${{ env.branch }}
    - name: Clone project frameworks/compile/slang
      if: steps.frameworks_compile_slang.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform frameworks/compile/slang
    - name: Restore Cache external/clang
      id: external_clang
      uses: actions/cache@v3
      with:
        path: aosp/external/clang
        key: external_clang@${{ env.branch }}
        restore-keys: external_clang@${{ env.branch }}
    - name: Clone project external/clang
      if: steps.external_clang.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/clang
    - name: Restore Cache external/OpenCSD
      id: external_OpenCSD
      uses: actions/cache@v3
      with:
        path: aosp/external/OpenCSD
        key: external_OpenCSD@${{ env.branch }}
        restore-keys: external_OpenCSD@${{ env.branch }}
    - name: Clone project external/OpenCSD
      if: steps.external_OpenCSD.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/OpenCSD
    - name: Restore Cache external/bsdiff
      id: external_bsdiff
      uses: actions/cache@v3
      with:
        path: aosp/external/bsdiff
        key: external_bsdiff@${{ env.branch }}
        restore-keys: external_bsdiff@${{ env.branch }}
    - name: Clone project external/bsdiff
      if: steps.external_bsdiff.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/bsdiff
    - name: Restore Cache external/cpu_features
      id: external_cpu_features
      uses: actions/cache@v3
      with:
        path: aosp/external/cpu_features
        key: external_cpu_features@${{ env.branch }}
        restore-keys: external_cpu_features@${{ env.branch }}
    - name: Clone project external/cpu_features
      if: steps.external_cpu_features.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/cpu_features
    - name: Restore Cache external/eigen
      id: external_eigen
      uses: actions/cache@v3
      with:
        path: aosp/external/eigen
        key: external_eigen@${{ env.branch }}
        restore-keys: external_eigen@${{ env.branch }}
    - name: Clone project external/eigen
      if: steps.external_eigen.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/eigen
    - name: Restore Cache external/fdlibm
      id: external_fdlibm
      uses: actions/cache@v3
      with:
        path: aosp/external/fdlibm
        key: external_fdlibm@${{ env.branch }}
        restore-keys: external_fdlibm@${{ env.branch }}
    - name: Clone project external/fdlibm
      if: steps.external_fdlibm.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/fdlibm
    - name: Restore Cache external/fec
      id: external_fec
      uses: actions/cache@v3
      with:
        path: aosp/external/fec
        key: external_fec@${{ env.branch }}
        restore-keys: external_fec@${{ env.branch }}
    - name: Clone project external/fec
      if: steps.external_fec.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/fec
    - name: Restore Cache external/flac
      id: external_flac
      uses: actions/cache@v3
      with:
        path: aosp/external/flac
        key: external_flac@${{ env.branch }}
        restore-keys: external_flac@${{ env.branch }}
    - name: Clone project external/flac
      if: steps.external_flac.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/flac
    - name: Restore Cache external/fmtlib
      id: external_fmtlib
      uses: actions/cache@v3
      with:
        path: aosp/external/fmtlib
        key: external_fmtlib@${{ env.branch }}
        restore-keys: external_fmtlib@${{ env.branch }}
    - name: Clone project external/fmtlib
      if: steps.external_fmtlib.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/fmtlib
    - name: Restore Cache external/gemmlowp
      id: external_gemmlowp
      uses: actions/cache@v3
      with:
        path: aosp/external/gemmlowp
        key: external_gemmlowp@${{ env.branch }}
        restore-keys: external_gemmlowp@${{ env.branch }}
    - name: Clone project external/gemmlowp
      if: steps.external_gemmlowp.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/gemmlowp
    - name: Restore Cache external/gflags
      id: external_gflags
      uses: actions/cache@v3
      with:
        path: aosp/external/gflags
        key: external_gflags@${{ env.branch }}
        restore-keys: external_gflags@${{ env.branch }}
    - name: Clone project external/gflags
      if: steps.external_gflags.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/gflags
    - name: Restore Cache external/giflib
      id: external_giflib
      uses: actions/cache@v3
      with:
        path: aosp/external/giflib
        key: external_giflib@${{ env.branch }}
        restore-keys: external_giflib@${{ env.branch }}
    - name: Clone project external/giflib
      if: steps.external_giflib.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/giflib
    - name: Restore Cache external/jsmn
      id: external_jsmn
      uses: actions/cache@v3
      with:
        path: aosp/external/jsmn
        key: external_jsmn@${{ env.branch }}
        restore-keys: external_jsmn@${{ env.branch }}
    - name: Clone project external/jsmn
      if: steps.external_jsmn.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/jsmn
    - name: Restore Cache external/jsoncpp
      id: external_jsoncpp
      uses: actions/cache@v3
      with:
        path: aosp/external/jsoncpp
        key: external_jsoncpp@${{ env.branch }}
        restore-keys: external_jsoncpp@${{ env.branch }}
    - name: Clone project external/jsoncpp
      if: steps.external_jsoncpp.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/jsoncpp
    - name: Restore Cache external/libcap
      id: external_libcap
      uses: actions/cache@v3
      with:
        path: aosp/external/libcap
        key: external_libcap@${{ env.branch }}
        restore-keys: external_libcap@${{ env.branch }}
    - name: Clone project external/libcap
      if: steps.external_libcap.outputs.cache-hit != 'true'
      run: |
        pushd aosp
        source $GITHUB_WORKSPACE/envsetup.sh
        clone_depth_platform external/libcap

    - name: Build Step-4
      run: |
        pushd aosp
        export TOP=$(pwd)
        $GITHUB_WORKSPACE/steps/build_step4.sh
        df -h

    - name: Archive external_gwp_asan-1
      uses: actions/upload-artifact@v3
      with:
        name: external_gwp_asan-1
        path: aosp/external_gwp_asan-1.tar.xz
    - name: Archive system_logging-0
      uses: actions/upload-artifact@v3
      with:
        name: system_logging-0
        path: aosp/system_logging-0.tar.xz
    - name: Archive external_libjpeg-turbo-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libjpeg-turbo-0
        path: aosp/external_libjpeg-turbo-0.tar.xz
    - name: Archive external_libldac-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libldac-0
        path: aosp/external_libldac-0.tar.xz
    - name: Archive external_libopus-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libopus-0
        path: aosp/external_libopus-0.tar.xz
    - name: Archive external_libpcap-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libpcap-0
        path: aosp/external_libpcap-0.tar.xz
    - name: Archive external_libtextclassifier-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libtextclassifier-0
        path: aosp/external_libtextclassifier-0.tar.xz
    - name: Archive external_libvpx-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libvpx-0
        path: aosp/external_libvpx-0.tar.xz
    - name: Archive external_newfs_msdos-0
      uses: actions/upload-artifact@v3
      with:
        name: external_newfs_msdos-0
        path: aosp/external_newfs_msdos-0.tar.xz
    - name: Archive external_oj-libjdwp-0
      uses: actions/upload-artifact@v3
      with:
        name: external_oj-libjdwp-0
        path: aosp/external_oj-libjdwp-0.tar.xz
    - name: Archive external_piex-0
      uses: actions/upload-artifact@v3
      with:
        name: external_piex-0
        path: aosp/external_piex-0.tar.xz
    - name: Archive external_rust_crates_thiserror-impl-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_thiserror-impl-0
        path: aosp/external_rust_crates_thiserror-impl-0.tar.xz
    - name: Archive external_rust_crates_tokio-macros-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_tokio-macros-0
        path: aosp/external_rust_crates_tokio-macros-0.tar.xz
    - name: Archive external_sonic-0
      uses: actions/upload-artifact@v3
      with:
        name: external_sonic-0
        path: aosp/external_sonic-0.tar.xz
    - name: Archive external_speex-0
      uses: actions/upload-artifact@v3
      with:
        name: external_speex-0
        path: aosp/external_speex-0.tar.xz
    - name: Archive external_strace-0
      uses: actions/upload-artifact@v3
      with:
        name: external_strace-0
        path: aosp/external_strace-0.tar.xz
    - name: Archive external_tinyalsa-0
      uses: actions/upload-artifact@v3
      with:
        name: external_tinyalsa-0
        path: aosp/external_tinyalsa-0.tar.xz
    - name: Archive frameworks_compile_mclinker-0
      uses: actions/upload-artifact@v3
      with:
        name: frameworks_compile_mclinker-0
        path: aosp/frameworks_compile_mclinker-0.tar.xz
    - name: Archive system_gatekeeper-0
      uses: actions/upload-artifact@v3
      with:
        name: system_gatekeeper-0
        path: aosp/system_gatekeeper-0.tar.xz
    - name: Archive system_tools_mkbootimg-0
      uses: actions/upload-artifact@v3
      with:
        name: system_tools_mkbootimg-0
        path: aosp/system_tools_mkbootimg-0.tar.xz
    - name: Archive tools_dexter-0
      uses: actions/upload-artifact@v3
      with:
        name: tools_dexter-0
        path: aosp/tools_dexter-0.tar.xz
    - name: Archive external_bcc-0
      uses: actions/upload-artifact@v3
      with:
        name: external_bcc-0
        path: aosp/external_bcc-0.tar.xz
    - name: Archive external_boringssl-0
      uses: actions/upload-artifact@v3
      with:
        name: external_boringssl-0
        path: aosp/external_boringssl-0.tar.xz
    - name: Archive external_cn-cbor-0
      uses: actions/upload-artifact@v3
      with:
        name: external_cn-cbor-0
        path: aosp/external_cn-cbor-0.tar.xz
    - name: Archive external_e2fsprogs-0
      uses: actions/upload-artifact@v3
      with:
        name: external_e2fsprogs-0
        path: aosp/external_e2fsprogs-0.tar.xz
    - name: Archive external_flatbuffers-0
      uses: actions/upload-artifact@v3
      with:
        name: external_flatbuffers-0
        path: aosp/external_flatbuffers-0.tar.xz
    - name: Archive external_fsck_msdos-0
      uses: actions/upload-artifact@v3
      with:
        name: external_fsck_msdos-0
        path: aosp/external_fsck_msdos-0.tar.xz
    - name: Archive external_google-fruit-0
      uses: actions/upload-artifact@v3
      with:
        name: external_google-fruit-0
        path: aosp/external_google-fruit-0.tar.xz
    - name: Archive external_iperf3-0
      uses: actions/upload-artifact@v3
      with:
        name: external_iperf3-0
        path: aosp/external_iperf3-0.tar.xz
    - name: Archive external_iptables-0
      uses: actions/upload-artifact@v3
      with:
        name: external_iptables-0
        path: aosp/external_iptables-0.tar.xz
    - name: Archive external_libdrm-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libdrm-0
        path: aosp/external_libdrm-0.tar.xz
    - name: Archive external_libevent-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libevent-0
        path: aosp/external_libevent-0.tar.xz
    - name: Archive external_libgav1-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libgav1-0
        path: aosp/external_libgav1-0.tar.xz
    - name: Archive external_libgsm-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libgsm-0
        path: aosp/external_libgsm-0.tar.xz
    - name: Archive external_libhevc-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libhevc-0
        path: aosp/external_libhevc-0.tar.xz
    - name: Archive external_libnl-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libnl-0
        path: aosp/external_libnl-0.tar.xz
    - name: Archive external_libogg-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libogg-0
        path: aosp/external_libogg-0.tar.xz
    - name: Archive external_libpng-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libpng-0
        path: aosp/external_libpng-0.tar.xz
    - name: Archive external_libutf-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libutf-0
        path: aosp/external_libutf-0.tar.xz
    - name: Archive external_llvm-0
      uses: actions/upload-artifact@v3
      with:
        name: external_llvm-0
        path: aosp/external_llvm-0.tar.xz
    - name: Archive external_lz4-0
      uses: actions/upload-artifact@v3
      with:
        name: external_lz4-0
        path: aosp/external_lz4-0.tar.xz
    - name: Archive external_modp_b64-0
      uses: actions/upload-artifact@v3
      with:
        name: external_modp_b64-0
        path: aosp/external_modp_b64-0.tar.xz
    - name: Archive external_nanopb-c-0
      uses: actions/upload-artifact@v3
      with:
        name: external_nanopb-c-0
        path: aosp/external_nanopb-c-0.tar.xz
    - name: Archive external_rust_crates_futures-macro-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_futures-macro-0
        path: aosp/external_rust_crates_futures-macro-0.tar.xz
    - name: Archive external_rust_crates_num-derive-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_num-derive-0
        path: aosp/external_rust_crates_num-derive-0.tar.xz
    - name: Archive external_rust_crates_serde_derive-0
      uses: actions/upload-artifact@v3
      with:
        name: external_rust_crates_serde_derive-0
        path: aosp/external_rust_crates_serde_derive-0.tar.xz
    - name: Archive external_ruy-0
      uses: actions/upload-artifact@v3
      with:
        name: external_ruy-0
        path: aosp/external_ruy-0.tar.xz
    - name: Archive external_vixl-0
      uses: actions/upload-artifact@v3
      with:
        name: external_vixl-0
        path: aosp/external_vixl-0.tar.xz
    - name: Archive external_webp-0
      uses: actions/upload-artifact@v3
      with:
        name: external_webp-0
        path: aosp/external_webp-0.tar.xz
    - name: Archive external_zstd-0
      uses: actions/upload-artifact@v3
      with:
        name: external_zstd-0
        path: aosp/external_zstd-0.tar.xz
    - name: Archive frameworks_compile_slang-0
      uses: actions/upload-artifact@v3
      with:
        name: frameworks_compile_slang-0
        path: aosp/frameworks_compile_slang-0.tar.xz
    - name: Archive external_OpenCSD-0
      uses: actions/upload-artifact@v3
      with:
        name: external_OpenCSD-0
        path: aosp/external_OpenCSD-0.tar.xz
    - name: Archive external_bsdiff-0
      uses: actions/upload-artifact@v3
      with:
        name: external_bsdiff-0
        path: aosp/external_bsdiff-0.tar.xz
    - name: Archive external_cpu_features-0
      uses: actions/upload-artifact@v3
      with:
        name: external_cpu_features-0
        path: aosp/external_cpu_features-0.tar.xz
    - name: Archive external_eigen-0
      uses: actions/upload-artifact@v3
      with:
        name: external_eigen-0
        path: aosp/external_eigen-0.tar.xz
    - name: Archive external_fdlibm-0
      uses: actions/upload-artifact@v3
      with:
        name: external_fdlibm-0
        path: aosp/external_fdlibm-0.tar.xz
    - name: Archive external_fec-0
      uses: actions/upload-artifact@v3
      with:
        name: external_fec-0
        path: aosp/external_fec-0.tar.xz
    - name: Archive external_flac-0
      uses: actions/upload-artifact@v3
      with:
        name: external_flac-0
        path: aosp/external_flac-0.tar.xz
    - name: Archive external_fmtlib-0
      uses: actions/upload-artifact@v3
      with:
        name: external_fmtlib-0
        path: aosp/external_fmtlib-0.tar.xz
    - name: Archive external_gemmlowp-0
      uses: actions/upload-artifact@v3
      with:
        name: external_gemmlowp-0
        path: aosp/external_gemmlowp-0.tar.xz
    - name: Archive external_gflags-0
      uses: actions/upload-artifact@v3
      with:
        name: external_gflags-0
        path: aosp/external_gflags-0.tar.xz
    - name: Archive external_giflib-0
      uses: actions/upload-artifact@v3
      with:
        name: external_giflib-0
        path: aosp/external_giflib-0.tar.xz
    - name: Archive external_jsmn-0
      uses: actions/upload-artifact@v3
      with:
        name: external_jsmn-0
        path: aosp/external_jsmn-0.tar.xz
    - name: Archive external_jsoncpp-0
      uses: actions/upload-artifact@v3
      with:
        name: external_jsoncpp-0
        path: aosp/external_jsoncpp-0.tar.xz
    - name: Archive external_libcap-0
      uses: actions/upload-artifact@v3
      with:
        name: external_libcap-0
        path: aosp/external_libcap-0.tar.xz
